/* ┌─────────────────────────────────────────────────────────────────────┐ \\
// │ Artkabis 1.3 - JavaScript Library                                   │ \\
// ├─────────────────────────────────────────────────────────────────────┤ \\
// │ Copyright (c) 2015-2016 Gregory NICOLLE (http://urliss35.free.fr)   │ \\
// │ Copyright (c) 20013-2016 Sencha Labs (http://sencha.com)            │ \\
// │ Licensed under the MIT (http://artkabis.com/license.html) license   │ \\
// └─────────────────────────────────────────────────────────────────────┘ \\


/* FRAMEWORK */
/** PROD **
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/latest/TweenLite.min.js" type="text/javascript" defer=""></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/latest/plugins/CSSPlugin.min.js" type="text/javascript" defer=""></script>
    <script src="https://s3-us-west-2.amazonaws.com/s.cdpn.io/16327/SplitText.min.js" type="text/javascript" defer=""></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/1.19.0/TweenMax.min.js" type="text/javascript" defer=""></script>
*/


/** Console log >> log(mavar) **/
<script src="https://gistcdn.githack.com/bgrins/5108712/raw/b85e8063f52882c93088662899a3629d76b5a0f9/Log-portable.js" type="text/javascript" defer=""></script>

ou

<script type="text/javascript">

window.log = function(){
  log.history = log.history || [];   // store logs to an array for reference
  log.history.push(arguments);
  if(this.console){
    console.log( Array.prototype.slice.call(arguments) );
  }
};
</script>






/******************************************************************* utilisation de console.error ****************************/
<script type="text/javascript">

var a = false;
var b = 2;
var d =true;

function (a, b, d){
	if(b>1) try{
		if (d) return;
	}catch (d){
	console.error('Typekit: Error in "' + b + '" callback', d);//renvois >> Typekit: Error in "2" callback true
	}
}
</script>













/******************************************************************* ajout de tooltip sur media grid ****************************/
<script type="text/javascript">

        //Ajout de tootltip en récupérant les alt des images
       
        applyTooltip =()=>	$('.vc_grid-item-mini').each(function(i,t){$(this).find('.vc_gitem-animated-block').after('<div class="myTooltip">'+$(this).find('img').attr('alt')+'</div>');});
		 to  = setTimeout(applyTooltip,2000);

</script>
<style>
/****************** VC-GRID TOOLTIP
****/
.vc_grid-item {
    padding: 0;
}
.vc_grid-item-mini:hover > div.myTooltip {
    background: rgba(0, 0, 0, 1);
    height: auto;
    width: 94.7%;
    position: absolute;
    left: 0;
    bottom: 15px;
    color: white;
    line-height: 30px;
    text-align: center;
    opacity: 1;
    transition: all .3s;
}
.vc_grid-item-mini > div.myTooltip{
    background: rgba(0, 0, 0, 1);
    height: auto;
    width: 94.7%;
    position: absolute;
    left: 0;
    bottom: -30px;
    color: white;
    line-height: 30px;
    text-align: center;
    opacity: 0;
    transition: all .3s;
}
.vc_grid-item-mini > div.myTooltip:first-letter{
            text-transform: capitalize;
}

</style>














/***** Paramétrage player autoplay et endscreen-enable ( eviter la lecture de la  video suivante )
<iframe frameborder="0" width="480" height="270" src="// https://www.dailymotion.com/embed/video/x4zyh1s?autoPlay=0&endscreen-enable=0" allowfullscreen="" allow="autoplay"></iframe>










<script type="text/javascript">


/* ---------------------------------------------------------------------------
	 * Equal Height | Wraps
	 * --------------------------------------------------------------------------- */

	function mfn_equalH_wrap(){
		$('.section.equal-height-wrap .section_wrapper').each(function(){
			var maxH = 0;
			$('> .wrap', $(this) ).each(function(){
				$(this).css( 'height', 'auto' );
				if( $(this).innerHeight() > maxH ){
					maxH = $(this).innerHeight();
				}
			});
			$('> .wrap', $(this) ).css( 'height', maxH + 'px' );
		});
	}


	/* ---------------------------------------------------------------------------
	 * Equal Height | Items
	 * --------------------------------------------------------------------------- */

	function mfn_equalH(){
		$('.section.equal-height .mcb-wrap-inner').each(function(){
			var maxH = 0;

			$('> .column', $(this) ).each(function(){
				$(this).css( 'height', 'auto' );
				if( $(this).height() > maxH ){
					maxH = $(this).height();
				}
			});
			$('> .column', $(this) ).css( 'height', maxH + 'px' );
		});
	}
</script>
/******************************************************************************************************************************************************************/









/************* Tester si une chaine comprte un mot ****************************/
<script type="text/javascript">

var testStr = "This is a test";

if(testStr.contains("test")){
    alert("String Found");
}


</script>



********************************************************************** setTimeout avec passage de paramètre *********************************************
<script type="text/javascript">

setTimeout(addBoxes, 1000, 9);
function addBoxes (amount) {
    console.log(amount)
}
</script>








********************************************************************** utilisation de distoration d'image au hover via hoverEffect *********************************************


Import app >>
<script src="https://rawcdn.githack.com/artkabis/Wordpress-Framework/master/js/hoverDistortion/imagesloaded.pkgd.min.js"></script>
<script src="https://rawcdn.githack.com/artkabis/Wordpress-Framework/master/js/hoverDistortion/hover.js"></script>
<script src="https://rawcdn.githack.com/artkabis/Wordpress-Framework/master/js/hoverDistortion/three.min.js"></script>
<script type="text/javascript">

$('.distHover > div').attr({"data-intensity":"0.6","data-speedin": "1.2","data-speedout":"0.5"});
var myAnim1=new hoverEffect({parent:document.querySelector('.distortHover > div'),image1:'/wp-content/uploads/sites/6039/2018/07/image-accueil-3_635.jpg',image2:'/wp-content/uploads/sites/6039/2018/07/image-accueil-3_669_nb.jpg',displacementImage:'/wp-content/uploads/sites/6039/2018/07/image-distort3.png'});
$('.distHover canvas').css('width',$('.distHover > div').width()+'px!important');
</script>












********************************************************************** Modifier les h4  d'une page par des h2 tout en gardant le texte d'origine *********************************************
<script type="text/javascript">

if(location.pathname === '/'){
    var h4Content = $(".photo_box").find("h4").each(function(){
    $(this).replaceWith("<h2 class='myH4'>"+$(this).text()+"</h2>");
    });
}
</script>














********************************************************************** Egaliser la hauteur de deux éléments avec gestion de du resize *********************************************
<script type="text/javascript">
var colPriceHeight = $('.colPrice .price').first().css('height');
 console.log('colPriceHeight >> ' + colPriceHeight);
$( window ).resize(function() {
    if($(window).width() <= 768){
        colPriceHeight = $('.colPrice .price').first().css('height');
        console.log('colPriceHeight >> ' + colPriceHeight);
        $('.colTitlePrice .titlePrice').first().css('height',colPriceHeight);
    }else{
        $('.colTitlePrice .titlePrice').first().css('height','auto');
    }
});
</script>














********************************************************************** affichage de prolive avec overlay *********************************************
<script type="text/javascript">
$('.prolive2').fadeOut(0);
$('#Header_wrapper').before('<div class="overlayBg"><span class="myBtnClose">X</span></div>');
$('.overlayBg').fadeOut(0);
$('#slide-5-layer-5').click(function(){
        $('#pj-prolive-hc-0 button').trigger('click');
        $('.prolive2').fadeIn(600);
        $('.overlayBg').fadeIn(600);
        console.log(' overlayBg is visible >> '+$( ".overlayBg" ).is( ":visible" ));
});
$('.myBtnClose').on('click',function(){
    console.log('click overlay');
    $('.overlayBg').fadeOut(600);
    $('.prolive2').fadeOut(600);
});

</script>
<style>
.prolive2 {
    position: absolute;
    top: -58vh;
    left: 50%;
    transform: translateX(-50%);
    z-index: 4;
}
.overlayBg {
    background-color: rgba(0,0,0,.8);
    position: absolute;
    width: 100vw;
    height: 100vh;
    top: 0;
    left: 0;
    z-index: 3;
}
.myBtnClose {
    position: absolute;
    height: 50px;
    width: 50px;
    color: white;
    font-size: 30px;
    left: 63%;
    top: 27%;
    background-color: black;
    text-align: center;
    line-height: 50px;
    cursor:pointer;
}
</style>
/****************************************************************** END overlay prolive ***********************************/






















/*********** fonction test contenu Array avec une valeur ************/
<script type="text/javascript">
var contains = function( arr, value ) {
	var i = 0, len = arr.length;
	while( i < len && arr[i] != value ) {
		i++;
	}
	return i != len;
};







/******************************** Split 
**/


function splitString(stringToSplit, separator) {
  var arrayOfStrings = stringToSplit.split(separator);

  console.log('La chaine d\'origine est : "' + stringToSplit + '"');
  console.log('Le délimiteur est : "' + separator + '"');
  console.log("Le tableau comporte " + arrayOfStrings.length + " elements : ");

  for (var i=0; i < arrayOfStrings.length; i++)
    print(arrayOfStrings[i] + " / ");
}



**********************************************************************   image cliquable   ouvrant la gallerie avec un overlay exemple sur >> https://concept-ainterieur.site-privilege.pagesjaunes.fr/cuisine/ *********************************************
var open = false;
$('#Content .content_wrapper').after('<div class="overlay"></div>');
$('.overlay').fadeOut();
if(location.pathname === '/cuisine/'){
    $('#photos-cuisine1').fadeOut();
    $('#galerie').on( "click", function() {
        $('.overlay').fadeIn();
        $('#photos-cuisine1').fadeIn();
        $('#photos-cuisine1').css({
            'position': 'absolute',
            'top': $(this).offset().top,
            'left':'50%',
            'transform': 'translate(-50%,-50%)',
            'width':'100%',
            'height':'auto',
            'z-index':'999'
        });
        
    });
    $('.overlay').on( "click", function() {
        $(this).fadeOut();
		$('#photos-cuisine1').fadeOut();
		$('#photos-cuisine1').css({
			'position': 'relative',
			'top': 'inherit',
			'left':'inherit',
			'transform': 'translate(0)',
			'width':'inherit',
			'height':'inherit',
            'z-index':'initial'
        });
    });
}
</script>
<style>
.overlay {
    background: rgba(0,0,0,.8);
    top: 0;
    left: 0;
    width: 100vw;
    height: 100%;
    position: absolute;
    z-index: 3;
}
</style>

/*****************************************************************************************************************************************************************************************/


















/*********** fonction permettant de modifier les images des vignettes woocomerce en supprimant les redimenstionnement et en ajoutant celle-ci au background du parent "mask" ************/
<script type="text/javascript">


/*** Suppression du -333x333 des images ***/
if(location.pathname.contains('vehicule')){
    $(".isotope-item a img").each(function(){
        $(this).attr('src', $(this).attr("src").replace(/-[\d]{3}x[\d]{3}/, ''));
       // newUrlImg.push($(this).attr('src', $(this).attr("src").replace(/-[\d]{3}x[\d]{3}/, '')));
    });
}
setTimeout(addBg,500);
function addBg(){
    $('.isotope-item a img').each(function(i,t){
        src.push($(this).attr('src'));
        console.log('src tab >> '+src[i]);
        $(this).parent().parent().find('.mask').css({'background-image':'url('+src[i]+')','background-size':'cover'});
    });
}
</script>

/***************************************************************************************************************************************************/






















/****************************************** Recuperation du href d'un lien pour realiser un window.location sur son parent ********************************************/
<script type="text/javascript">

var links=[];
$('.cadre .wpb_text_column ').each(function(i,t){
    $(this).css('cursor','pointer');
    links.push($(this).find('a').attr('href'));
    $(this).addClass('link-'+i);
    console.log(links);
$(this).click(function(e){
      id = $(this).attr('class').lastIndexOf('-')+1;
      nb = $(this).attr('class').substring(id,id+1);
      console.log('nb >> ' + nb);
         window.location=links[nb];
         console.log('links[nb] >> ' + links[nb]);
         console.log($(this).attr('class'));
    });
});

</script>

/***************************************************************************************************************************************************/



































/*********** fonction permettant de lancer une fancy box d'un ts-galerie-images au clic d'un élément ************/
<script type="text/javascript">
// Les id doivent être relié par un même chiffre exemple #cuisine1 >> #content-cuisine1
jQuery('[id^="cuisine"').on('click', function() {
    var lastID = $(this).attr('id').toString().indexOf('e') + 1;
    var nb = $(this).attr('id').toString().substring(lastID,lastID+1);
    console.log('lastID >> '+lastID, 'nb >> '+nb);
    setTimeout(openBox,200,($('#content-cuisine'+nb)));
});

function openBox($target){
    var __target = $target.find('.ts-flipster-item-content > a');
    console.log(__target.attr('class'));
    __target.trigger('click');
}


</script>

/***************************************************************************************************************************************************/
















********************************************************************** Delete title h2, prolive *********************************************
<script type="text/javascript">
setTimeout(deleteTitlePL,1500);
function deleteTitlePL(){
    console.log("sto joué " +  $('.news').find('h2').text());
    $('.news').find('h2').remove();
}
</script>


************************************----------------------------------------------******************************















********************************************************************** naviguer vers une ancre après x seconde *********************************************

<script type="text/javascript">
if(location.pathname === "/nos-realisations/" ){  
	setTimeout(navigToAncre,1500,'/nos-realisations/#poele');
	function navigToAncre($link){
		window.location.hash=$link;
	}
}
</script>












************************************----------------Interchanger deux div entre elles ------------------------------******************************

<script type="text/javascript">



/*** échange des des pictos toilette et vidéo ***/
var div1 = $('.gchoice_10_23_1');
var div2 = $('.gchoice_10_23_3');

var tdiv1 = div1.clone();
var tdiv2 = div2.clone();

div1.replaceWith(tdiv2);
div2.replaceWith(tdiv1);


</script>






************************************----------------Modifier la valeur et le background-image des frigots du calculateur de volume  ------------------------------******************************

<script type="text/javascript">

setTimeout(replaceElementCalc,500);

function replaceElementCalc(){
    
    $('#tab-1 .frigo-am').attr("data-volume",2);
    $('#tab-1 .frigo-top').attr("data-volume",1);
    
    var bgFrigoAm = $('#tab-1 .frigo-am').css('background-image');
    var bgFrigoTop = $('#tab-1 .frigo-top').css('background-image');
    
     $('#tab-1 .frigo-am').css('background-image',bgFrigoTop);
     $('#tab-1  .frigo-top').css('background-image',bgFrigoAm);
} 

</script>










********************************************************************** Delete title h2, prolive *********************************************
<script type="text/javascript">

//Ajout d'un lien vers un site externe avec icon
var styleSocial ={'color': 'white'};
var socialIcon ={"padding-left": "10px","color": "white"};
$('#Action_bar .social').html('<a href="https://www.perene.fr/">Visitez notre site  <i class="fa-icon-globe"></i></a>');
$('#Action_bar .social a').css(styleSocial);
$('#Action_bar .social i').css(socialIcon);

</script>



































********************************************************************** effet zoom sur image au scroll (scsecurity lolo) *********************************************

<script type="text/javascript">
$(window).scroll(function(){
  var hScroll = $(this).scrollTop()/5;
  var calc = 220 - hScroll; 
  var result = calc.toString() + 'vh !important';
  $("html .sousBloc1Item1 .vc_column-inner").css("cssText", "background-size: " + result);
}) 
</script>
















******************************************************* Iframe youtube parametres api ****************************************************************************************************************************************
<iframe width="1920" height="950" src="https://www.youtube.com/embed/l7FIR2OH63c?rel=0&amp;controls=0&amp;showinfo=0&amp;autoplay=1&amp;loop=1$amp;&mute=1" frameborder="0" allowfullscreen="allowfullscreen"></iframe> 










**********************************************************************  IMPORTER UN FICHIER JS DANS LE HEAD *********************************************

<script type="text/javascript">
	var head = document.getElementsByTagName("head")[0];
	script = document.createElement('script');
	script.type = 'text/javascript';
	script.src = 'https://ajax.googleapis.com/ajax/libs/jquery/1.6.4/jquery.min.js';
	head.appendChild(script);
	
script = document.createElement('script');
script.onload = function() {
    // jQuery is available now
};

script.type = 'text/javascript';
script.src = 'https://ajax.googleapis.com/ajax/libs/jquery/1.6.4/jquery.min.js';

head.appendChild(script);
</script>







**********************************************************************  Detection de mousedown sur dektop et touchstart sur mobile via javascript *********************************************

<script type="text/javascript">


$(document).ready(function () {
    var isTouchDevice = 'ontouchstart' in document.documentElement;
    
    $("#touchSensitive").mousedown(function(event) {
        if (isTouchDevice == false) {   
            pushed();   
        }
    });
    $("#touchSensitive").mouseup(function(event) {
        if (isTouchDevice == false) {   
            released(); 
        }
    });
    $('#touchSensitive').on('touchstart', function(){
        if (isTouchDevice)  {   
            pushed();   
        }
    });
    $('#touchSensitive').on('touchend', function(){
        if (isTouchDevice)  {   
            released(); 
        }
    });
});

</script>














***************************************************************************************** charger une page dans une div **********************************************
<input type="button" value="Load new document" onclick="newDoc()">

<script>
function newDoc() {
    window.location.assign("https://www.w3schools.com")
}











********************************************************************** Navigation sans wrap de <a href=''><a> via window.location *********************************************
<script type="text/javascript">
var links=["/verandas/","/fenetres/","/portails/","/pergolas/"];// mise en place des liens dans l'ordre des elements cliquable
$('.colCarre').each(function(i,t){
  $(this).addClass('link'+i);
  $('.link'+i).click(function(e){
        window.location=links[i];//navigation via l'url correspondante au link (+i) 
        window.location.hash=links[i];//navigation vers une ancre via le hash
    });
}); 
</script>












********************************************************************** Charger plusieurs fichiers js de façon Asynchrone ( import multiple scripts Async ) *********************************************
<script type="text/javascript">


 var script,
    scripts = document.getElementsByTagName('script')[0],
    scriptList = {
      'plusone'  : '//apis.google.com/js/plusone.js',
      'twitter'  : '//platform.twitter.com/widgets.js',
      'someother': '//s.widgetsite.com/widget.js'
    };

for (var id in scriptList) {
  script = document.createElement('script');
  script.async = true;
  script.src = scriptList[id];
  scripts.parentNode.insertBefore(script, scripts);
}




********************************************************************** envoyer un paramètre dans l url  *********************************************

function getParameterByName(name){
  name = name.replace(/[\[]/, "\\\[").replace(/[\]]/, "\\\]");
  var regexS = "[\\?&]" + name + "=([^&#]*)";
  var regex = new RegExp(regexS);
  var results = regex.exec(window.location.search);
  if(results == null)
    return "";
  else
    return decodeURIComponent(results[1].replace(/\+/g, " "));
}







</script>






********************************************************************************** tracking google analytics click  ********************************************************************
<script>

    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)
    [0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-XXXXXXXX-X', 'auto') ; 

    ga('send', 'pageview');

  </script>

<input type= "button" value ="Click Me" onclick="ga('send', 'event', { eventCategory: 'Book button', eventAction: 'Click', eventLabel: 'enquiry home page'});"/>

********************************************************************************************************************************************************************************************









/****  Supprime les liens contenant seulement un # et ajoute le pointer
****
******************************/
<script type="text/javascript">

  $("a[href='#']").removeAttr("href").css("cursor","pointer");

</script>
/*****************************************************************************************************************************************************/







<script type="text/javascript">
/**** Create GlueBall **/
var sizeY='30px';
var sizeX = '30px';
var cssBall =   { position:'fixed',top:'0',left:'0',zIndex:'1000',backgroundColor : "black",borderRadius : '50%',height:sizeY,width:sizeX,opacity:'0.2',pointerEvents:'none'};
var cssBall2 = {position:'fixed',top:'0',left:'0',zIndex:'1000',backgroundColor : "black",borderRadius : '50%',height:sizeY,width:sizeX,pointerEvents:'none',mixBlendMode: "color",opacity:"1"};
var ball = "<div class='glueBall'></div>";
var ball2 = "<div class='glueBall2'></div>";
$('#Content').append(ball);
$('#Content').append(ball2);
var GlueBall = $('#Content').find('.glueBall');
var GlueBall2 = $('#Content').find('.glueBall2');
GlueBall.css(cssBall);
GlueBall2.css(cssBall2);
document.addEventListener("mousemove",function(e){var posX =  e.clientX-5;var posY = e.clientY-5;TweenMax.to(GlueBall,1.3,{x:posX,y:posY,ease:Expo.easeOut});TweenMax.to(GlueBall2,1.3,{x:posX,y:posY,ease:Expo.easeOut});});

$("a")
  .on("mouseenter", function() {TweenMax.to(GlueBall,1,{scale:3,ease:Bounce.easeOut});TweenMax.to(GlueBall2,1,{scale:3,ease:Bounce.easeOut});})
  .on("mouseleave", function() {TweenMax.to(GlueBall,1.3,{scale:1,ease:Bounce.easeOut});TweenMax.to(GlueBall2,1.3,{scale:1,ease:Bounce.easeOut});});
</script>


<style type="text/css">
/*cursor**/
body {cursor: url(/wp-content/uploads/sites/5476/2018/03/black-cursor.png), pointer;}
img{cursor: wait;}
a, a:hover,a:link, .vc_btn3:hover,button:hover {cursor: url("/wp-content/uploads/sites/5476/2018/03/hand-cursor.png"),auto;}
</style>
/*****************************************************************************************************************************************************/














/******* Ball suiveuse avec 

var ball = '<div class="cursor js-cursor"><div class="cursor__ball js-cursor__big""><svg height="30" width="30" class="cursor-circle js-cursor-circle"><circle cx="15" cy="15" r="12" stroke="transparent" stroke-width="0" class="cursor-circle__inner"></circle></svg></div><div class="cursor__ball js-cursor__small"><svg height="10" width="10" class="cursor-circle js-cursor-circle"><circle cx="5" cy="5" r="4" stroke="transparent" stroke-width="0" class="cursor-circle__inner"></circle></svg></div></div>';

$('#Content').append(ball);
var GlueBall = $('#Content').find('.js-cursor');
document.addEventListener("mousemove",function(e){
    var posX =  e.clientX-5;//e.pageX-5;
    var posY = e.clientY-5;//e.pageY-5;
    TweenMax.to($('.js-cursor > .js-cursor__big'),1.3,{x:posX,y:posY,ease:Expo.easeOut});
    TweenMax.to($('.js-cursor > .js-cursor__small'),1.3,{x:e.clientX+5,y:e.clientY,ease:Expo.easeOut});
});

$("a")
  .on("mouseenter", function() {TweenMax.to($('.js-cursor__big'),.5,{scale:3.8,ease:Back.easeOut});})
  .on("mouseleave", function() {TweenMax.to($('.js-cursor__big'),.5,{scale:1,ease:Back.easeIn});});























**************************************************** Ajout de link au image du modul TS-Galerie-d'image ****************************************************
/**

/*** Desactiver les liens des paramètres du TS Galerie d'images en allant dans : layout >> liens images et selectionner : "Supprimer l'image Liens"
<script type="text/javascript">
var linksPartenaires =[
                        "http://www.prefal.fr/ ",
                        "https://www.atlantem.fr/",
                        "http://cloheac.fr/",
                        "https://www.dickson-constant.com/fr/FR",
                        "https://www.franciaflex.com/",
                        "http://www.ksm-production.com/",
                        "http://www.luxaflex.fr/",
                        "https://www.france-fermetures.fr/",
                        "http://www.profalux.com/"
                        ];
setTimeout(changeLinkPart,1000);
setInterval(deleteFancyB,1000);
function changeLinkPart(){
    $('.nchgrid-item').each(function(i,t){
        console.log(t,i,linksPartenaires[i]);
        $(this).find(".ts-flipster-item-content").wrap('<a href="'+linksPartenaires[i]+'"></a>');
    });
}
function deleteFancyB (){
     $('.nchgrid-item').each(function(i,t){
        // if($(this).find('.ts-flipster-item-content').children('a'))
        $(this).find(".ts-flipster-item-content > a").remove();
    });
}
</script>















*******************************************************  Ajout de style dans le head de la page *******************
<script type="text/javascript">
  var css = 'h1 { background: red; }',
      head = document.head || document.getElementsByTagName('head')[0],
      style = document.createElement('style');

  style.type = 'text/css';
  if (style.styleSheet){
    style.styleSheet.cssText = css;
  } else {
    style.appendChild(document.createTextNode(css));
  }

  head.appendChild(style);
</script>
/*****************************************************************************************************************************************************/











/********************************************** Detection si le site est ouvert  depuis une device mobile ******************************************/
<script type="text/javascript">
	$.browser.device = (/android|webos|iphone|ipad|ipod|blackberry|iemobile|opera mini/i.test(navigator.userAgent.toLowerCase()));
	ou :
	
	var isMobile = false; //initiate as false
// device detection
	if(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|ipad|iris|kindle|Android|Silk|lge |maemo|midp|mmp|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows (ce|phone)|xda|xiino/i.test(navigator.userAgent) 
		|| /1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(navigator.userAgent.substr(0,4))) { 
		isMobile = true;
	}









/***** Simuler click sur chrtome seuleument ***/
$.browser.chrome = /chrom(e|ium)/.test(navigator.userAgent.toLowerCase()); 

if($.browser.chrome){
  $("#slide-25-layer-5").trigger('click'); 

}
</script>










/********************************************** scroll page par page  ******************************************/
<script type="text/javascript">


function ScrollHandler(pageId) { 
  var page = $('#' + pageId);
  var pageStart = page.offset().top;
  var pageJump = false;

  function scrollToPage() {
    pageJump = true;
      $('html, body').animate({ 
      scrollTop: pageStart 
    }, {
      duration: 1000,
      complete: function() {
        pageJump = false;
      }
    });  
  }
  window.addEventListener('wheel', function(event) {
   var viewStart = $(window).scrollTop();
   if (!pageJump) { 
      var pageHeight = page.height();
      var pageStopPortion = pageHeight / 2;
      var viewHeight = $(window).height();

      var viewEnd = viewStart + viewHeight;
      var pageStartPart = viewEnd - pageStart;
      var pageEndPart = (pageStart + pageHeight) - viewStart;
      
      var canJumpDown = pageStartPart >= 0; 
      var stopJumpDown = pageStartPart > pageStopPortion; 
      
      var canJumpUp = pageEndPart >= 0; 
      var stopJumpUp = pageEndPart > pageStopPortion; 

      var scrollingForward = event.deltaY > 0;
      if (  ( scrollingForward && canJumpDown && !stopJumpDown) 
         || (!scrollingForward && canJumpUp   && !stopJumpUp)) {
        event.preventDefault();
        scrollToPage();
      } 
   } else {
     event.preventDefault();
   }    
  });
}

new ScrollHandler('un'); 
new ScrollHandler('deux');
new ScrollHandler('trois');
new ScrollHandler('quatre');
new ScrollHandler('cinq');
new ScrollHandler('six');

</script>












/********************************************** Detection de touchemove en mobile ******************************************/
<script type="text/javascript">

$('#element').on('touchmove', function(event) {
	event.preventDefault ();
	var touch= e.originalEvent.touches [0] || e.originalEvent.changedTouches [0];
	var elm= $(this).offset();
	var x= touch.pageX - elm.left;
	var y= touch.pageY - elm.top;
	if(x <$(this).width() && x> 0) {
		if(y < $(this).height() && y> 0) {
			// LE CODE VIENT ICI 
			console.log (touch.pageY + '' + touch.pageX);
		} 
	}
});
</script>
/***************************************************************************************************************************************/



















/********************************************** Enregistrer des clés :  id>>valeur dans localStorage ******************************************/
<script type="text/javascript">


var testObject = { 'one': 1, 'two': 2, 'three': 3 };
// Put the object into storage
localStorage.setItem('testObject', JSON.stringify(testObject));
// Retrieve the object from storage
var retrievedObject = localStorage.getItem('testObject');
console.log('retrievedObject: ', JSON.parse(retrievedObject));



*** methode getter setter avec prototypage ****
Storage.prototype.setObject = function(key, value) {
    this.setItem(key, JSON.stringify(value));
}

Storage.prototype.getObject = function(key) {
    var value = this.getItem(key);
    return value && JSON.parse(value);
}



*** autre methode getter setter 
var data = {
	set: function(key, value) {
		if (!key || !value) {return;}
		if (typeof value === "object") {value = JSON.stringify(value);}
		localStorage.setItem(key, value);
	},
	get: function(key) {
		var value = localStorage.getItem(key);
		if (!value) {return;}
		// assume it is an object that has been stringified
		if (value[0] === "{") {value = JSON.parse(value);}
		return value;
	}
}

data.set({ labelStorage: 'LocalStorage', valueStorage: 'true'});
</script>























*******************************************************  Creation bouton tel animé avec gestion sticky dans Top_bar *******************
<script type="text/javascript">

//Ajout du tel dans la top_bar
$('#Header #Top_bar').append("<a class='telMenu' href='tel:0556295641'>05 56 29 56 41</a>");
</script>
<style type="text/css">
  #Header #Top_bar .telMenu {
    color: white;
    font-size: 3em;
    line-height: 1;
    position: absolute;
    right: 1%;
    top: 31%;
    font-weight: 100;
    border-bottom: solid 0px transparent;
    transition: all .6s;
}
#Header #Top_bar .telMenu:hover {
    right: 1.3%;
    top: 31%;
    text-decoration: none;
    transition: all .6s;
    border-bottom: solid 1px white;
}
#Header #Top_bar.is-sticky .telMenu {
    font-size: 26px;
}
@media screen and (max-width: 1450px) {.tel-menu {display: none; }}

</style>
/*****************************************************************************************************************************************************/














// Ajout de tootltip en recupérant les alt des images
<script type="text/javascript">

    var to  = setTimeout(applyTooltip,300);
    var applyTooltip = function(){
        clearTimeout(applyTooltip);
        $('.nchgrid-item').each(function(e){
            
            $(this).find('.ts-flipster-tile').after('<div class="myTooltip">'+$(this).find('img').attr('alt')+'</div>');
        });
    }; 
	 $('.nchgrid-item').each(function(e){
			$(this).find('.ts-flipster-tile').after('<div class="myTooltip">'+$(this).find('img').attr('alt')+'</div>');
	 });
	$('.nchgrid-item > div.myTooltip').css({background:'rgba(0, 0, 0, 0.5)',height: 'auto',width: '94.7%',position:'absolute',left: '0',bottom:'5px',color:'white',lineHeight:'30px',textAlign:'center',opacity:'1',transition:'all .6s'});
	$('.myTooltip').fadeOut(300);



	setInterval(detectCurrent,200);
	function detectCurrent(){
		 $('.nchgrid-item .myTooltip').fadeOut(100);
		$('.ts-flipster-item-current .myTooltip').fadeIn(200);
	} 
</script>
/*****************************************************************************************************************************************************/















*******************************************************  Creation submenu fadeIn fadeOut sur module viewer *******************
<script type="text/javascript">

var linkPA1 =["/volets-roulants/#alu","/volets-roulants/#pvc","/volets-roulants/#bois"];
var linkPA2 =["/fenetres/#alu","/fenetres/#pvc","/fenetres/#bois"];
var subMenu1 = "<div class='subMenu'><a href ='"+linkPA1[0]+"'>Alu</a><a href='"+linkPA1[1]+"'>PVC</a><a href='"+linkPA1[2]+"'>Bois</a></div>";
var subMenu2 = "<div class='subMenu'><a href ='"+linkPA2[0]+"'>Alu</a><a href='"+linkPA2[1]+"'>PVC</a><a href='"+linkPA2[2]+"'>Bois</a></div>";
$('.bannerMenuiserie:eq(0) a').before(subMenu1);
$('.bannerMenuiserie:eq(1) a').before(subMenu2);
</script>
<style type="text/css">
  .banner-item .subMenu {
    position: absolute;
    right: 0;
    top: 0;
    display: flex;
    flex-direction: column;
    opacity: 0;
    z-index: 1;
    transition: all .4s;
    z-index:0;
}
.banner-item:hover .subMenu {
    right: -100px;
    opacity: 1;
    transition: all .4s;
    z-index:1;
}
.banner-item .subMenu a {
    width: 100px;
    background-color: black;
    height: 25px;
    float: left;
    display: block;
    color: white;
    margin-bottom: 1px;
    font-size: 15px;
    line-height: 25px!important;
    text-transform: uppercase;
    font-weight: 300;
    font-family: 'Raleway';
}
.banner-item .subMenu a:after {
    content: '>>';
    position: absolute;
    right: 5px;
    background-color: rgba(0, 0, 0, 0.73);
    height: 25px;
    line-height: 25px;
    font-weight: 300;
    font-family: 'Raleway';
    transition: all .4s;
}
.banner-item .subMenu a:hover::after {
    right: 10px;
    transition: all .4s;
}

</style>
/*****************************************************************************************************************************************************/






































*******************************************************  Ajout de style dans le head de la page *******************
<script type="text/javascript">

watermark(['/img/field.jpg'])
  .image(watermark.text.lowerRight('MyPhoto', '28px serif', '#fff', 0.5))
  .then(function (img) {
    document.getElementById('text').appendChild(img);
  });
</script>
/*****************************************************************************************************************************************************/

     









<script type="text/javascript">
  

C65h:function(e,t,i){"use strict";var n=function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"cursor js-cursor"},[t("div",{staticClass:"cursor__ball js-cursor__big"},[t("svg",{staticClass:"cursor-circle js-cursor-circle",attrs:{height:"30",width:"30"}},[t("circle",{staticClass:"cursor-circle__inner",attrs:{cx:"15",cy:"15",r:"12",stroke:"transparent","stroke-width":"0"}})])]),t("div",{staticClass:"cursor__ball js-cursor__small"},[t("svg",{staticClass:"cursor-circle js-cursor-circle",attrs:{height:"10",width:"10"}},[t("circle",{staticClass:"cursor-circle__inner",attrs:{cx:"5",cy:"5",r:"4",stroke:"transparent","stroke-width":"0"}})])])])};n._withStripped=!0;var s={render:n,staticRenderFns:[]};t.a=s},Cm6l:function(e,t,i){"use strict";var n=i("UDoj"),s=i("X0nh");t.a={name:"logo",mixins:[s.a],mounted:function(){this.$store.state.isMobile||this.initMagnetic()},methods:{initMagnetic:function(){this.magneticLogo=new n.a("[data-magnetic-logo]"),this.magneticLogo.init()}}}},Gu7T:function(e,t,i){"use strict";t.__esModule=!0;var n,s=i("c/Tr"),r=(n=s)&&n.__esModule?n:{default:n};t.default=function(e){if(Array.isArray(e)){for(var t=0,i=Array(e.length);t<e.length;t++)i[t]=e[t];return i}return(0,r.default)(e)}},LGuY:function(e,t){e.exports=function(){throw new Error("define cannot be used indirect")}},Ma2J:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i("wU0i"),s=i("STrE"),r=!1;var o=function(e){r||i("A/hp")},a=i("VU/8")(n.a,s.a,!1,o,null,null);a.options.__file="layouts\\default.vue",t.default=a.exports},ONfb:function(e,t,i){"use strict";var n=i("+Uzz"),s=(i.n(n),i("Lri4")),r=(i.n(s),i("X0nh"));t.a={name:"desktop-nav",mixins:[r.a],props:["slugs"]}},RSGG:function(e,t,i){(e.exports=i("FZ+f")(!1)).push([e.i,".loader,body,html{height:100%}.loader{position:absolute;top:0;left:0;width:100%;background-color:#17181a;z-index:2000}",""])},S9WF:function(e,t,i){(e.exports=i("FZ+f")(!1)).push([e.i,".cursor{pointer-events:none}.cursor__ball{position:fixed;top:0;left:0;mix-blend-mode:difference;z-index:1000}.cursor-circle__inner{fill:#f7f8fa}.no-blend .cursor__ball{mix-blend-mode:normal;opacity:.25}.no-blend .cursor-circle__inner{-webkit-transition:fill .35s ease;transition:fill .35s ease}.no-blend .app--white .cursor-circle__inner{fill:#17181a}.no-blend .app--black .cursor-circle__inner{fill:#f7f8fa}",""])},STrE:function(e,t,i){"use strict";var n=function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"app",class:"app"+this.$store.state.color},[t("site-header"),t("nuxt"),this.$store.state.isMobile?this._e():t("custom-cursor"),t("div",{staticClass:"loader js-loader"}),t("transition-mask")],1)};n._withStripped=!0;var s={render:n,staticRenderFns:[]};t.a=s},UDoj:function(e,t,i){"use strict";var n=i("Zrlr"),s=i.n(n),r=i("wxAW"),o=i.n(r),a=i("+Uzz"),l=i.n(a),T=function(){function e(t){s()(this,e),this.elem=document.querySelector(t),this.cursor={x:0,y:0},this.bounds=this.elem.getBoundingClientRect(),this.size={height:this.bounds.height,width:this.bounds.width},this.center={x:0,y:0},this.x=0,this.y=0,this.dist=0,this.threshold=50,this.isHover=0,this.state=!1}return o()(e,[{key:"cursorPosition",value:function(e){this.cursor={x:e.clientX,y:e.clientY}}},{key:"listener",value:function(){this.bounds=this.elem.getBoundingClientRect(),this.center={x:this.bounds.left+this.size.width/2,y:this.bounds.top+this.size.height/2},this.x=this.cursor.x-this.center.x,this.y=this.cursor.y-this.center.y,this.dist=Math.sqrt(this.x*this.x+this.y*this.y),this.isHover=this.dist<this.size.width/2+this.threshold,this.isHover?this.on():this.state&&!this.isHover&&this.off()}},{key:"on",value:function(){l.a.to(this.elem,.5,{x:.5*this.x,y:.5*this.y,skewX:this.x>0?.125*this.x:-.125*this.x,scale:1.1,rotation:.05*this.x,ease:Power2.easeOut}),this.state=!0}},{key:"off",value:function(){l.a.to(this.elem,1,{x:0,y:0,rotation:0,skewX:0,skewY:0,scale:1,ease:Elastic.easeOut.config(1.2,.4)}),this.state=!1}},{key:"init",value:function(){var e=this;window.addEventListener("mousemove",function(t){e.cursorPosition(t),e.listener()},!1)}}]),e}();t.a=T}


t.a={name:"custom-cursor",mounted:function(){var e=document.querySelector(".js-cursor"),t=e.querySelector(".js-cursor__big"),i=e.querySelector(".js-cursor__small"),n=(t.getBoundingClientRect(),[].concat(s()(document.querySelectorAll("a"))),!1);window.addEventListener("mousemove",function(e){o.a.to(t,1,{x:e.clientX-15,y:e.clientY-15,ease:Expo.easeOut}),o.a.set(i,{x:e.clientX-5,y:e.clientY-7.5})
</script>
























******************************************************* Regrouper un style dans une variable de type Object est l'appliquer à un élément***************************
<script type="text/javascript">

var styles = {
      backgroundColor : "#ddd",
      fontWeight: ""
    };
    $( this ).css( styles );

</script>
/*****************************************************************************************************************************************************/

















******************************** Ajout 2eme logo  à droite de la top_bar_left****************************************************
<script type="text javascript">
$('#Header #Top_bar .top_bar_left').after('<a id="logo2" href="https://www.censeo42.com"><img class="logo-main scale-with-grid" src="/wp-content/uploads/sites/3488/2017/04/logo-censeo.jpg" alt="Logotype - Censeo"></a>');
$('#Header #Top_bar #logo2 img').css( {'width': '170px','position': 'absolute','right': '0'});
</script>












******************************** Detection des différent navigateurs ****************************************************
<script type="text/javascript">

var ua = navigator.userAgent.toLowerCase();
var isAndroid = ua.indexOf("android") > -1; //&& ua.indexOf("mobile");
if(isAndroid) {
  // Do something!
  // Redirect to Android-site?
  //window.location = 'http://android.davidwalsh.name';
}



ou

  var isAndroid = /(android)/i.test(navigator.userAgent);


</script>
/*****************************************************************************************************************************************************/































****************************************************** Modifier un pseudo element *************************************************************************
<script type="text/javascript">


/***** fonction permettant de modifier un pseudo element ******/
var addRule = function(sheet, selector, styles) {
    if (sheet.insertRule) return sheet.insertRule(selector + " {" + styles + "}", sheet.cssRules.length);
    if (sheet.addRule) return sheet.addRule(selector, styles);
};
/************************** En modif pseudo element ********************/

/*********************************** ---- Animation des lignes decoP-nb avec un effet yoyo si le viewport depasse les 768px****************************************************/
if($(window).width()>768){
    var tl = new TimelineMax({ repeat: -1, yoyo: true });
    function animDeco(nb){
      tl.to($("#deco"+nb), 1, {left: -30 ,ease: Power2.easeInOut}, nb);
    }
    /***************** Gestion attr deco *************/
    //.decoP-nb est situé dans un bloc texte, les ligne doivent être separé les une des autre par au moins un saut de ligne
    $('.decoP-nb p').each(function(e,t){
        var nb = e+1;
        console.log('nombre de ligne de deco : '+nb);
        $(this).attr('id','deco'+nb);
        $(this).addClass('deco');
        animDeco(nb);
       
        addRule(document.styleSheets[0], "body .deco:nth-child("+(e+1)+"):before", "content: '"+(e+1)+"'");
    });
    var tlBox=new TimelineMax();
}
if($(window).width()<768){
    var tl = new TimelineMax({ repeat: 0, yoyo: false });
    tl.to($("#deco"+nb), 0.1, {left: 0 ,ease: Power2.easeInOut}, nb);
}
</script>
/*****************************************************************************************************************************************************/





























****************************************************** Animation des element de form d'un positionnement interne des label à celui d'un positionnement vers le haut avec espacement *************************************************************************
<script type="text/javascript">

var controller = new ScrollMagic.Controller();
// build scene 1
var scene = new ScrollMagic.Scene({
          triggerElement: "#trigger1"
        })
        .setTween("#animate1", 0.5, {backgroundColor: "green", scale: 2.5}) // trigger a TweenMax.to tween
        .addIndicators({name: "1 (duration: 0)"}) // add indicators (requires plugin)
        .addTo(controller);




// build scene 2
var scene = new ScrollMagic.Scene({triggerElement: "#trigger2", duration: 300})
              // animate color and top border in relation to scroll position
              .setTween("#animate2", {borderTop: "30px solid white", backgroundColor: "blue", scale: 0.7}) // the tween durtion can be omitted and defaults to 1
              .addIndicators({name: "2 (duration: 300)"}) // add indicators (requires plugin)
              .addTo(controller);


			  
			  
			  ou >>>
			  
			  
if(location.pathname === '/2-2/'){
	TweenLite.set(".colTarifs", {perspective:800});
	TweenLite.set(".colTarifs", {transformStyle:"preserve-3d"});
	TweenLite.set(".colTarifs", {rotationY:180});
	var controller = new ScrollMagic.Controller();
	var scene = new ScrollMagic.Scene({triggerElement: "#tarifs"})
						.setTween(".colTarifs", 1.2, {rotationY:0}) // trigger a TweenMax.to tween
						//.addIndicators({name: "1 (duration: 0)"}) // add indicators (requires plugin)
						.addTo(controller);
}


var controller = new ScrollMagic.Controller();
var tween = TweenMax.staggerFromTo(".animate4", 2, {left: 700}, {left: 0, ease: Back.easeOut}, 0.15);
var scene = new ScrollMagic.Scene({triggerElement: "#trigger4", duration: 300})
					.setTween(tween)
					.addIndicators({name: "staggering"}) // add indicators (requires plugin)
					.addTo(controller);





>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>

//animation de plusieurs élément en cascade
// build tween
  var tween = TweenMax.staggerFromTo(".animate4", 2, {left: 700}, {left: 0, ease: Back.easeOut}, 0.15);

  // build scene
  var scene = new ScrollMagic.Scene({triggerElement: "#trigger4", duration: 300})
          .setTween(tween)
          .addIndicators({name: "staggering"}) // add indicators (requires plugin)
          .addTo(controller);


		  
		  ou
		  
    var controller = new ScrollMagic.Controller();
	var tween = TweenMax.staggerFromTo(".colPrice .price", 3, {left: 600,opacity:0}, {left: 0,opacity:1, ease: Back.easeOut}, 0.15);
	var tween2 = TweenMax.staggerFromTo(".colTitlePrice .titlePrice", 3, {left: -600,opacity:0}, {left: 0,opacity:1, ease: Back.easeOut}, 0.15);
    var scene = new ScrollMagic.Scene({triggerElement: "#trigger", duration: 250})
					.setTween(tween)
					.addTo(controller);
					
	var scene2 = new ScrollMagic.Scene({triggerElement: "#trigger", duration: 250})
					.setTween(tween2)
					.addTo(controller);

>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
// Link Ancor Link animation
import scroll plugin >> https://rawcdn.githack.com/artkabis/Wordpress-Framework/master/js/ScrollToPlugin.min.js

// init controller
  var controller = new ScrollMagic.Controller();

  // build tween
  var tween = TweenMax.from("#animate", 0.5, {autoAlpha: 0, scale: 0.7});

  // build scene
  var scene = new ScrollMagic.Scene({triggerElement: "a#top", duration: 200, triggerHook: "onLeave"})
          .setTween(tween)
          .addIndicators() // add indicators (requires plugin)
          .addTo(controller);

  // change behaviour of controller to animate scroll instead of jump
  controller.scrollTo(function (newpos) {
    TweenMax.to(window, 0.5, {scrollTo: {y: newpos}});
  });
  
  
  
  
  
  
  
  
</script>











<script>
  //  bind scroll to anchor links
  $(document).on("click", "a[href^='#']", function (e) {
    var id = $(this).attr("href");
    if ($(id).length > 0) {
      e.preventDefault();

      // trigger scroll
      controller.scrollTo(id);

        // if supported by the browser we can even update the URL.
      if (window.history && window.history.pushState) {
        history.pushState("", document.title, id);
      }
    }
  });

</script>














>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
// Animation d'un element avec une courbe de bezier
<script>

  $(function () { // wait for document ready
    var flightpath = {
      entry : {
        curviness: 1.25,
        autoRotate: true,
        values: [
            {x: 100,  y: -20},
            {x: 300,  y: 10}
          ]
      },
      looping : {
        curviness: 1.25,
        autoRotate: true,
        values: [
            {x: 510,  y: 60},
            {x: 620,  y: -60},
            {x: 500,  y: -100},
            {x: 380,  y: 20},
            {x: 500,  y: 60},
            {x: 580,  y: 20},
            {x: 620,  y: 15}
          ]
      },
      leave : {
        curviness: 1.25,
        autoRotate: true,
        values: [
            {x: 660,  y: 20},
            {x: 800,  y: 130},
            {x: $(window).width() + 300,  y: -100},
          ]
      }
    };
    // init controller
    var controller = new ScrollMagic.Controller();

    // create tween
    var tween = new TimelineMax()
      .add(TweenMax.to($("#plane"), 1.2, {css:{bezier:flightpath.entry}, ease:Power1.easeInOut}))
      .add(TweenMax.to($("#plane"), 2, {css:{bezier:flightpath.looping}, ease:Power1.easeInOut}))
      .add(TweenMax.to($("#plane"), 1, {css:{bezier:flightpath.leave}, ease:Power1.easeInOut}));

    // build scene
    var scene = new ScrollMagic.Scene({triggerElement: "#trigger", duration: 500, offset: 100})
            .setPin("#target")
            .setTween(tween)
            .addIndicators() // add indicators (requires plugin)
            .addTo(controller);
  })
</script>
/***************************************************************************************************************************************************************/



























****************************************************** retract log console *************************************************************************
<script type="text/javascript">
var log = console.log.bind(console);

ou

function f() {
    var a = arguments;
    if (typeof console != "undefined" && console.log) {
        if (console.log.apply) {
            console.log.apply(console, arguments);
        } else {
            var output = '';
            for (i=0;i<arguments.length;i++) {
                output += arguments[i] + ' ';
            }
            console.log(output);
        }
    }
}
</script>
/***************************************************************************************************************************************************************/






























****************************************************** Decouper une chaine de caractère en fonction du séparateur et renvois un tableau *************************
<script type="text/javascript">

function splitString(stringToSplit, separator) {
  var arrayOfStrings = stringToSplit.split(separator);

  console.log('La chaine d\'origine est : "' + stringToSplit + '"');
  console.log('Le délimiteur est : "' + separator + '"');
  console.log("Le tableau comporte " + arrayOfStrings.length + " elements : ");

  for (var i=0; i < arrayOfStrings.length; i++)
    print(arrayOfStrings[i] + " / ");
}

var tempestString = "Oh brave new world that has such people in it.";
var monthString = "Jan,Feb,Mar,Apr,May,Jun,Jul,Aug,Sep,Oct,Nov,Dec";

var espace = " ";
var virgule = ",";

splitString(tempestString, espace);
splitString(tempestString);
splitString(monthString, virgule);







/********************** Recuperer les chiffres present dans une chaine ***********/
var myString = "Hello 1 word. Sentence number 2.";
var splits = myString.split(/(\d)/); /* Ce motif correspond à un chiffre et est équivalent à [0-9] */

console.log(splits);// renvoi : Hello ,1, word. Sentence number ,2,.
</script>
/***************************************************************************************************************************************************************/












/***************************** Fonction pour refresh une image regulièrement *******************************/

<script type="text/javascript">
function refresh() {
   var tmp = new Date();
   var img = document.getElementById("id_de_limage");
   img.src = img.src + '?' + tmp.getTime();
}
 
window.onload = function() {
  setInterval(refresh,1000);
 };
</script>
















****************************************************** Filter gestion des données d'un Array *************************************************************************
<script type="text/javascript">


var words = ['spray', 'limit', 'elite', 'exuberant', 'destruction', 'present'];

const result = words.filter(word => word.length > 6);

console.log(result);
// expected output: Array ["exuberant", "destruction", "present"] renvois les element de type string ayant plus de 6 caractères

</script>
/***************************************************************************************************************************************************************/












/*************** Recupération du nombre de mots à modifier dans un title *************************************************************************/
<script type="text/javascript">

var classW = 'themeColor_word-';
var titleClass = $('.myH1').attr('class');
var indexWordClass = titleClass.indexOf(classW);
var nbWords =parseInt(titleClass.substring(indexWordClass+classW.length,indexWordClass+classW.length+1),10);

//console.log('nbWords >> '+nbWords);

/******* Stylise un nombre de mot du h1, defini par le dernier caractère de la class themeColor_word-  ****/
$.fn.wrapStart = function (numWords) { 
    var node = this.contents().filter(function () { return this.nodeType == 3 }).first(),
        text = node.text(),
        first = text.split(" ", numWords).join(" ");

    if (!node.length)
        return;
    
    node[0].nodeValue = text.slice(first.length);
    node.before('<span class="themeColor">' + first + '</span>');
};
$(".myH1").wrapStart(nbWords);// Découpe le nombre de mots defini via la class themeColor_word-

</script>
/***************************************************************************************************************************************************************/












/*************** Recupération du nombre de mots à modifier dans un title *************************************************************************/
<script type="text/javascript">


/*************** Recupération du nombre de mots à modifier dans un title *****/
var classW = 'themeColor_word-';
var titleClass = $('.myH1').attr('class');
var indexWordClass = titleClass.indexOf(classW);
var nbWords =parseInt(titleClass.substring(indexWordClass+classW.length,indexWordClass+classW.length+1),10);

/******* Stylise un nombre de mot du h1, defini par le dernier caractère de la class themeColor_word-  ****/
$.fn.wrapStart = function (numWords) { 
    var node = this.contents().filter(function () { return this.nodeType == 3 }).first(),
        text = node.text(),
        first = text.split(" ", numWords).join(" ");
    if (!node.length)
        return;
    node[0].nodeValue = text.slice(first.length);
    node.before('<span class="themeColor">' + first + '</span>');
};
$(".myH1").wrapStart(nbWords);// Découpe le nombre de mots defini via la class themeColor_word-
/*********************************************************************************************************/

var arrClasses = [];
var arrayWords =[];
var needle;
$("[class*='firstWThemeColor-']").removeClass(function () { // Select the element divs which has class that starts with some-class-
    var className = this.className.match(/firstWThemeColor-\d+/); //get a match to match the pattern some-class-somenumber and extract that classname
    if (className) {
        arrClasses.push(className[0]); //if it is the one then push it to array
        //return className[0]; //return it for removal
        needle = parseInt(className[0].toString().split("-").pop(),10);//add some number val to needle
        var indexWords = $(this).text().indexOf(' ');
        var title =  $(this).text();
        var titleL = $(this).text().length;
        var nbWords;// = $('.myH1').text().replace( /[^\w ]/g, "" ).split( /\s+/ ).length;
        nbWords = locations(" ",$('.myH1').text());
        //-> [ 6,14,23,36,39,46,55,58,65,68,75,77]
        
        
        var wordsArray = title.split(" ",needle);
        arrayWords = title.split(" ");
        //console.log("arrayWords >> "+arrayWords);
        var word1,word2,word3,word4,word5,word6,word7,word58,word9,word10,wordLast1,word2Last2,wordLast3,wordLast4,wordLast5,wordLast6,wordLast7,wordLast8,wordLast9,wordLast10;
        
        wordLast1 = nbWords[0];wordLast2 = nbWords[1];
        if(location.pathname==='/'){wordLast3 = title.lastIndexOf(',')+1;}else{ wordLast3 = nbWords[2];}
        wordLast4 = nbWords[3];wordLast5 = nbWords[4];wordLast6 = nbWords[5];wordLast7 = nbWords[6];wordLast8 = nbWords[7];wordLast9 = nbWords[8];wordLast10 = nbWords[9];
        //console.log('nbWords >> '+nbWords);

        word1 = wordsArray[0];word2 = wordsArray[1];word3 = wordsArray[2];word4 = wordsArray[3];word5 = wordsArray[4];word6 = wordsArray[5];word7 = wordsArray[6];word8 = wordsArray[7];word9 = wordsArray[8];word10 = wordsArray[9];

        if(needle===1){
            $(this).html('<span class="themeColor">' + word1 + '</span>' + title.substring(wordLast1,titleL));
        }else if(needle===2){
            $(this).html('<span class="themeColor">' + word1 +' ' +word2 + '</span>');
            $(this).html($(this).html() + title.substring(wordLast2,titleL));
        }else if(needle===3){
            $(this).html('<span class="themeColor">' + word1 + ' ' + word2 + ' ' + word3 + '</span>');
            $(this).html($(this).html() + title.substring(wordLast3,titleL).toString());
        }else if(needle===4){
            $(this).html('<span class="themeColor">' + word1 + ' ' + word2 + ' ' + word3 +  ' ' + word4 + '</span>');
            $(this).html($(this).html() + title.substring(wordLast4,titleL).toString());
        }else if(needle===5){
            $(this).html('<span class="themeColor">' + word1 + ' ' + word2 + ' ' + word3 +  ' ' + word4 + ' ' + word5 + '</span>');
            $(this).html($(this).html() + title.substring(wordLast5,titleL).toString());
        }else if(needle===6){
            $(this).html('<span class="themeColor">' + word1 + ' ' + word2 + ' ' + word3 +  ' ' + word4 + ' ' + word5 + ' ' + word6 + '</span>');
            $(this).html($(this).html() + title.substring(wordLast6,titleL).toString());
        }else if(needle===7){
            $(this).html('<span class="themeColor">' + word1 + ' ' + word2 + ' ' + word3 +  ' ' + word4 + ' ' + word5 + ' ' + word6 + ' ' + word7 + '</span>');
            $(this).html($(this).html() + title.substring(wordLast7,titleL).toString());
        }
    }
});
</script>
/***************************************************************************************************************************************************************/





/*************** changement de couleur des title h1 & h2 en fonction des nombres récuperer dans la classe 2_word-3 (ici le theme2 appliqué aux trois premiers mots) *************************************************************************/

<script type="text/javascript">


var firstH1, firstH2, nbThemeH1, nbThemeH2, strNbThemeH1, strNbThemeH2, indexNbThemeH1, indexNbThemeH2;
var classWrds = '_word-';
var titleClassH1 = $('.myH1').attr('class');
var titleClassH2 = $('.myH2').attr('class');
var indexWordClassH1 = titleClassH1.indexOf(classWrds);
var indexWordClassH2 = titleClassH2.indexOf(classWrds);
var nbWordsH1 =parseInt(titleClassH1.substring(indexWordClassH1+classWrds.length,indexWordClassH1+classWrds.length+1),10);
var nbWordsH2 =parseInt(titleClassH2.substring(indexWordClassH2+classWrds.length,indexWordClassH2+classWrds.length+1),10);


//******* Stylise un nombre de mot du h1, defini par le dernier caractère de la class themeColor2_word-3 et applique le style de couleur via le nombre situé avant le _ ****/
$.fn.wrapStart = function (numWords) { 
   if($(this).hasClass('myH1')){
        var node = this.contents().filter(function () { return this.nodeType == 3 }).first(),
        text = node.text(),
        first = text.split(" ", nbWordsH1).join(" ");
        text = node.text(),node[0].nodeValue = text.slice(first.length);
        indexNbThemeH1 = titleClassH1.toString().lastIndexOf("_");
        strNbThemeH1 = titleClassH1.toString().substring(indexNbThemeH1,indexNbThemeH1-1).toString();
        nbThemeH1 = parseInt(strNbThemeH1.substring(strNbThemeH1.length,strNbThemeH1.length-1),10);
        if(nbThemeH1>1){node.before('<span class="themeColor'+nbThemeH1+'">' + first + '</span>');}
        else if(nbThemeH1.isNaN || nbThemeH1 === undefined || nbThemeH1 <= 1){node.before('<span class="themeColor">' + first + '</span>');}
   }
    if($(this).hasClass('myH2')){
        var node2 = this.contents().filter(function () { return this.nodeType == 3 }).first(),
        text2 = node2.text(),
        first2 = text2.split(" ", nbWordsH2).join(" ");
        text2 = node2.text(),node2[0].nodeValue = text2.slice(first2.length);
        indexNbThemeH2 = titleClassH2.toString().lastIndexOf("_");
        strNbThemeH2 = titleClassH2.toString().substring(indexNbThemeH2,indexNbThemeH2-1).toString();
        nbThemeH2 = parseInt(strNbThemeH2.substring(strNbThemeH2.length,strNbThemeH2.length-1),10);
        if(nbThemeH2>1){node2.before('<span class="themeColor'+nbThemeH2+'">' + first2 + '</span>');}
        else if(nbThemeH2.isNaN || nbThemeH2 === undefined || nbThemeH2 <= 1){node2.before('<span class="themeColor">' + first2 + '</span>');}
    }
};


$(".myH1").wrapStart(nbWordsH1);// Découpe le nombre de mots defini via la class themeColor(id du theme color)_word-(nb du nombre de mot)
$(".myH2").wrapStart(nbWordsH2);// Découpe le nombre de mots defini via la class themeColor(id du theme color)_word-(nb du nombre de mot)










/*************** Recupération du nombre de mots à modifier dans un title et du theme couleur choisi  *****/


/**** 
la class placé dans Wordpress , ex : themeColor2_word-5 appliquera le themeColor2 aux cinq premiers mots du texte contenant cette classe
****/
<script type="text/javascript">

var classW = '_word-';
var titleClass = $('.myH1').attr('class');
var indexWordClass = titleClass.indexOf(classW);
var nbWords =parseInt(titleClass.substring(indexWordClass+classW.length,indexWordClass+classW.length+1),10);
 var nbTheme = 0;
 var strNbTheme;
 var indexNbTheme;
/******* Stylise un nombre de mot du h1, defini par le dernier caractère de la class themeColor_word-  ****/
$.fn.wrapStart = function (numWords) { 
    var node = this.contents().filter(function () { return this.nodeType == 3 }).first(),
        text = node.text(),
        first = text.split(" ", numWords).join(" ");
        indexNbTheme = titleClass.toString().lastIndexOf("_");
        strNbTheme = titleClass.toString().substring(indexNbTheme,indexNbTheme-1).toString();
        console.log('strNbTheme >> '+strNbTheme);
         console.log('indexNbTheme >> '+indexNbTheme);
        nbTheme = parseInt(strNbTheme.substring(strNbTheme.length,strNbTheme.length-1),10);
        console.log('nbTheme    >> '+nbTheme);
    if (!node.length)
        return;
        node[0].nodeValue = text.slice(first.length);
        console.log('theme 2 appliqué !!!');
        console.log('nbTheme >> '+nbTheme);
        if(nbTheme>1){node.before('<span class="themeColor'+nbTheme+'">' + first + '</span>');}
        else{node.before('<span class="themeColor">' + first + '</span>');}
};
$(".myH1").wrapStart(nbWords);// Découpe le nombre de mots defini via la class themeColor_word-
</script>

/*********************************************************************************************************/










/*************** Recherche et remplace un texte  *****/

<script type="text/javascript">
$('.wpb_text_column p').each(function(i,t){
    var text = $(this).text();
    $(this).text(text.replace('ALGUENA-COMBLES', 'Alguena Combles - Surélévations - Extensions')); 
    $(this).text(text.replace('Alguena-Combles', 'Alguena Combles - Surélévations - Extensions')); 
    $(this).text(text.replace('ALGUENAS-COMBLES', 'Alguena Combles - Surélévations - Extensions')); 
    $(this).text(text.replace('ALGUNAS-COMBLES', 'Alguena Combles - Surélévations - Extensions')); 
});
</script>

/*********************************************************************************************************/






/*************** Animation card rotation 3D et lancement animation en fonction du scroll *************************************************************************/
<script type="text/javascript">
TweenLite.set(".cardWrapper, .pictoWrapper", {perspective:800});
TweenLite.set(".card", {transformStyle:"preserve-3d"});
TweenLite.set(".back", {rotationY:-180});
TweenLite.set([".back", ".front"], {backfaceVisibility:"hidden"});
if($w.width() > 1024 ){
    $(".cardWrapper,.pictoWrapper").hover(
        function() {$(this).addClass('hover');TweenLite.to($(this).find(".card"), 1.2, {rotationY:180, ease:Back.easeOut});},
        function() {$(this).removeClass('hover');TweenLite.to($(this).find(".card"), 1.2, {rotationY:0, ease:Back.easeOut});}
    );
}
/***************** Scollmagic ****************************/
var wh = window.innerHeight,
    $cardP = $('.pictoWrapper .card'),
    $rowPicto =$('.rowPictos');
    
var ctrl = new ScrollMagic.Controller({
    globalSceneOptions: {
        triggerHook: 'onLeave'
    }
});
// Create scene
if($w.width() > 1239 ){
    var cardPictoTL = new TimelineMax();
    cardPictoTL       
        .from($cardP, 1.3, {rotationY:0, repeat:1, yoyo:true}, 0.1)
        .to($cardP, 1.3, {rotationY:-180, repeat:1, yoyo:true}, 0.1);
    
    $cardP.each(function(i,t){
         new ScrollMagic.Scene({
            offset: wh*0.6,
            triggerElement: $(this)[i],
            // interactiv Zone (rotation almost visible target)
            duration: '40%'
        })
        .setTween(cardPictoTL)
        .addTo(ctrl);  
    });
}
/**************************** Mutation observer  écoute changement de classe **********************************************/
var $MutationObserver = window.MutationObserver || window.WebKitMutationObserver || window.MozMutationObserver;

$.fn.attrchange = function(callback) {
    if ($MutationObserver) {
        var options = {subtree: false,attributes: true};
        var observer = new MutationObserver(function(mutations) {
            mutations.forEach(function(e) {
                callback.call(e.target, e.attributeName);
            });
        });
        return this.each(function() {observer.observe(this, options);});
    }
};

var cmp=0;
//Ajout de l'écouteur d'événement attrchange
$('.cardWrapper, .pictoWrapper').attrchange(function(attrName) {
    if(attrName=='class' && cmp===0){TweenMax.to($(this).find(".card"), 1.2, {rotationY:180, ease:Back.easeOut});cmp =1;
    }else if(attrName=='class' && cmp===1){ TweenMax.to($(this).find(".card"), 1.2, {rotationY:0, ease:Back.easeOut});cmp=0;}
});

//a nice little intro;)
TweenMax.staggerTo($(".cardWrapper .card"), 1, {rotationY:-180, repeat:1, yoyo:true}, 0.1);

</script>
/***************************************************************************************************************************************************************/











/*************** Color word in themeColor number and nb number word to last number class *************************************************************************/
<script type="text/javascript">

$.fn.wrapStart = function (numWords) { 
    var titleClass = $(this).attr('class');
    var indexWordClass = titleClass.indexOf(classWrds);
    var nbWords = parseInt(titleClass.substring(indexWordClass+classWrds.length,indexWordClass+classWrds.length+1),10);
    console.log('titleClass >> '+titleClass,'   indexWordClass >> '+indexWordClass,  '   nbWords >> '+ nbWords);
    
        var node = this.contents().filter(function () { return this.nodeType == 3 }).first(),
        text = node.text(),
        first = text.split(" ", nbWordsH1).join(" ");
        text = node.text(),node[0].nodeValue = text.slice(first.length);
        var indexNbTheme = titleClass.toString().lastIndexOf("_");
        var strNbTheme = titleClass.toString().substring(indexNbTheme,indexNbTheme-1).toString();
        var nbTheme = parseInt(strNbTheme.substring(strNbTheme.length,strNbTheme.length-1),10);
        if(nbTheme>1){node.before('<span class="themeColor'+nbTheme+'">' + first + '</span>');}
        else if(nbTheme.isNaN || nbTheme === undefined || nbTheme <= 1){node.before('<span class="themeColor">' + first + '</span>');}
};


$(".myH1").wrapStart(nbWordsH1);// Découpe le nombre de mots defini via la class themeColor(id du theme color)_word-(nb du nombre de mot)
$(".myH2").wrapStart(nbWordsH2);// Découpe le nombre de mots defini via la class themeColor(id du theme color)_word-(nb du nombre de mot)

</script>









/****** Bon à imprimer ****************/
<script type="text/javascript">

$("#btnPrint").live("click", function () {
            var divContents = $(".rowActu").html();
            var printWindow = window.open('', '', 'height=300,width=476');
            printWindow.document.write('<html><head>');
            printWindow.document.write('<style>.rowActu {width: 100vw!important;float: right!important;overflow: visible!important;height: 200px;position: absolute!important;top: -75px;}.colActu {position: absolute;font-size: 1.3em;color: black;right: 15px;z-index: 2;filter: drop-shadow(0 0 6px transparent);width: 300px;height: 476px;}.colActu > .vc_column-inner {webkit-box-flex: 1;-webkit-flex-grow: 1;-ms-flex-positive: 1;flex-grow: 1;display: flex;-webkit-flex-direction: column;-ms-flex-direction: column;flex-direction: column;z-index: 3;-webkit-box-orient: vertical;-webkit-box-direction: normal;background-size: cover!important;padding: 60px 20px 20px 20px!important;width: 100%;box-sizing: border-box;}.colActu figure{margin-top:20px;z-index:4;}.colActu .icon-phone {z-index:4;font-size: 2em;color: white;filter: drop-shadow(0 0 3px transparent);}.telActu {z-index:4;font-size: 1.6em;font-weight: 900;color: royalblue;text-shadow: 0 0 2px rgba(0, 0, 0, 0.65);transition: all .4s;border-bottom:solid 0px var(--themeColor);}.telActu:hover {font-size: 1.7em;text-shadow: 0 0 2px rgba(0, 0, 0, 0.75);transition: all .4s;border-bottom:solid 1px var(--themeColor);}#btnPrint {cursor: pointer;margin-bottom: 20px;}#print-area > .vc_column-inner {background-image: url(https://www.ets-fichaix.fr/wp-content/uploads/sites/5504/2018/01/bon-a-imprimer-V3.png) !important;}.colActu p{z-index:4;}#btnPrint{width:100%}#btnPrint img {text-align: center!important;}</style></head><body >');
            printWindow.document.write("<img style='position:absolute;right:0px;z-index:4;width: 320px;height: 780px;' src='https://www.ets-fichaix.fr/wp-content/uploads/sites/5504/2018/01/bon-a-imprimer-V3.png'>"+divContents);
            printWindow.document.write('</body></html>');
            printWindow.document.close();
            setTimeout(printWindow.print(),1500);
});
</script>
/***************************************************************************************************************************************************************/




















****************************************************** Une classe animation *************************************************************************

<script type="text/javascript">


const secondsPerFrame = 16.666 / 1000
const precision = 0.01

const step = (
  lastValue,
  lastVelocity,
  toValue,
  stiffness,
  damping
) => {
  const spring = -stiffness * (lastValue - toValue)
  const damper = -damping * lastVelocity
  
  const all = spring + damper
  const nextVelocity = lastVelocity + all * secondsPerFrame
  const nextValue = lastValue + nextVelocity * secondsPerFrame
  
  const shouldRest = Math.abs(nextVelocity) < precision && Math.abs(nextValue - toValue) < precision
  
  return {
    velocity: shouldRest ? 0 : nextVelocity,
    value: shouldRest ? toValue : nextValue,
  }
}

const spring = ({ stiffness = 180, damping = 12, onRest = (() => {}), toValue }) => onUpdate => {
  let frame
  const tick = (curr) => {
    const { velocity, value } = step(curr.value, curr.velocity, toValue, stiffness, damping)
    onUpdate({ velocity, value })
    if(velocity !== 0 && value !== toValue) {frame = requestAnimationFrame(() => tick({ value, velocity }))} else {onRest()}
  }
  return {
    start: (value) => {frame = requestAnimationFrame(() => tick(value))},
    stop: () => {cancelAnimationFrame(frame)},
  }
  
}

class Value {
  constructor(initialValue) {
    this.value = {value: initialValue,velocity: 0,}
    this.listeners = new Set()
    this.animation = null
  }
  addListener(listener) {
    this.listeners.add(listener)
    return () => {this.listeners.delete(listener)}
  }
  updateValue(nextValue) {
    this.value = nextValue
    this.listeners.forEach(listener => listener(this.value.value))
  }
  animate(animation) {
    if(this.animation) {this.animation.stop()}
    this.animation = animation((v) => this.updateValue(v))
    this.animation.start(this.value)
  }
}

const scale = new Value(1)
scale.addListener(value => myElement.style.transform = `scale(${ value })`)
myElement.onmousedown = () => {scale.animate(spring({ toValue: 2 }))}
myElement.onmouseup = () => {scale.animate(spring({ toValue: 1 }))}

</script>
/***************************************************************************************************************************************************************/






























****************************************************** Fonction fléchées add *************************************************************
<script type="text/javascript">


let add = function (x = 0, y = 0) {return x + y;};
log(add(5,10));//15
</script>
/***************************************************************************************************************************************************************/









****************************************************** Exemple de fonction fléchées *************************************************************
<script type="text/javascript">


const aFn = obj => ({ key: obj.msg }); // It works !
let _obj = {msg:'It works ! '};

</script>
/***************************************************************************************************************************************************************/














****************************************************** fonction animation border pour effet elastique *************************************************************
<script type="text/javascript">
//$('.contGoutte').before("<span class='goutte'></span>");
function getRandomIntInclusive(min, max) {
  min = Math.ceil(min);
  max = Math.floor(max);
  return Math.floor(Math.random() * (max - min +1)) + min;
}
//TweenMax.to($('.goutte'), 2, {opacity:1,right:'-250px', ease:Back.easeOut});
var tl = new TimelineMax({delay:0.5, repeat:2, repeatDelay:2});
//banner animation code (only 11 lines)
tl.from( $('.goutte') , 6, {css:{top: '129px',borderRadius: getRandomIntInclusive(7,12)+'px '+  getRandomIntInclusive(30,45)+'px ' +getRandomIntInclusive(30,45)+'px '+ getRandomIntInclusive(30,45)+'px'}, ease:Back.easeOut});

</script>
/***************************************************************************************************************************************************************/












****************************************************** recupération clé valeur via le mot clé of depuis un for *************************************************************
<script type="text/javascript">

let languages = [ "C", "C++", "C#", "JavaScript" ];
for (let [index, language] of languages.entries()) {
    console.log(`Index: ${index} => Valeur: ${language}`);
}

</script>
/***************************************************************************************************************************************************************/































****************************************************** Trying to Save Callbacks *************************************************************************
<script type="text/javascript">
function success(data) {
  console.log( data );
}

function failure(err) {
  console.error( err );
}
ajax( "http://some.url.1", success, failure );


/******************************************************** Timeout ***/

function timeoutify(fn,delay) {
  var intv = setTimeout( function(){
      intv = null;
      fn( new Error( "Timeout!" ) );
    }, delay )
  ;

  return function() {
    // timeout hasn't happened yet?
    if (intv) {
      clearTimeout( intv );
      fn.apply( this, [ null ].concat( [].slice.call( arguments ) ) );
    }
  };
}

/****************************************************** Asyncify ***/
function asyncify(fn) {
  var orig_fn = fn,
    intv = setTimeout( function(){
      intv = null;
      if (fn) fn();
    }, 0 )
  ;

  fn = null;

  return function() {
    // firing too quickly, before `intv` timer has fired to
    // indicate async turn has passed?
    if (intv) {
      fn = orig_fn.bind.apply(
        orig_fn,
        // add the wrapper's `this` to the `bind(..)`
        // call parameters, as well as currying any
        // passed in parameters
        [this].concat( [].slice.call( arguments ) )
      );
    }
    // already async
    else {
      // invoke original function
      orig_fn.apply( this, arguments );
    }
  };
}

</script>
/***************************************************************************************************************************************************************/























******************************************************  Les classes et l'heritage simple *************************************************************************
<script type="text/javascript">

class Person {
    constructor(name, age) {
        this.name = name;
        this.age = age;
    }

    toString() {
        return `Hi I'm ${this.name} and I'm ${this.age} years old!`;
    }
}

let p = new Person("John", 18);
console.log(p.toString());
// Hi I'm John and I'm 18 years old



--------------------------------   Puis Developer heritant de Person >> 




class Developer extends Person {
    constructor(name, age, language) {
        super(name, age);
        this.language = language;
    }

    toString() {
        return super.toString() + ` :: I'm a Developer who likes ${this.language}`;
    }
}

let d = new Developer("Yannick", 29, "JavaScript");
console.log(d.toString());
//  Hi I'm Yannick and I'm 29 years old :: I'm a Developer who likes JavaScript



/***************************************************************************************************************************************************************/
</script>






















****************************************************** Math.random min max *************************************************************************
<script type="text/javascript">

function random(min, max) {
  if (max == null) { max = min; min = 0; }
  return Math.random() * (max - min) + min;
}
/***************************************************************************************************************************************************************/
</script>















*************** Recupération du nombre de mots à modifier dans un title depuis la classe defini dans l'objet ***************
<script type="text/javascript">

var classW = 'themeColor_word-';
var titleClass = $('.myH1').attr('class');
var indexWordClass = titleClass.indexOf(classW);
console.log('indexWordClass >> '+indexWordClass)
var nbWords =parseInt(titleClass.substring(indexWordClass+classW.length,indexWordClass+classW.length+1),10);

console.log('nbWords >> '+nbWords); // renvoi le chiffre défini dans le dernier caractère de la class themeColor_word-

/******* Modification et découpe du nombre de mot d'une chaine de caractère en parametre ****/
$.fn.wrapStart = function (numWords) { 
    var node = this.contents().filter(function () { return this.nodeType == 3 }).first(),
        text = node.text(),
        first = text.split(" ", numWords).join(" ");

    if (!node.length)
        return;
    
    node[0].nodeValue = text.slice(first.length);
    node.before('<span class="themeColor">' + first + '</span>');
};

// Découpe le nombre de mots definis via la class themeColor_word- 
//si themeColor_word-4, alors les 4 premiers mots du h1 auront la classe themeColor appliquée
$(".myH1").wrapStart(nbWords);
</script>
/*******************************************************************************************************************************************************/

















*************** Detect si un element est visible dans son conteneur ***************
<script type="text/javascript">
    // Helper visible check funtion
    function isVisible(elem, container) {
      var isVisible = typeof container !== 'undefined' && container !== null ? $(elem).visible(false, false, 'both', container) : $(elem).visible();
  }

$('button').click(function(e){
  isVisible('#item1', '#container');// #item1 >> element à detecter , container >> bloc conteneur 
}

</script>
/*******************************************************************************************************************************************************/
    

















****************************************************** Mathematique TOOLS  *************************************************************************
<script type="text/javascript">

const _DEG2RAD = Math.PI / 180,
var vars;
vars.angle = 60;

if (vars.angle || vars.angle === 0) {
        angle = vars.angle * _DEG2RAD;
    } else {
        angle = Math.atan2(dy, dx) - Math.PI / 2;
    }
    sin = Math.sin(angle);
    cos = Math.cos(angle);
    sin2 = Math.sin(angle + Math.PI / 2);
    cos2 = Math.cos(angle + Math.PI / 2);
    negCos = Math.cos(-angle);
    negSin = Math.sin(-angle);
/***************************************************************************************************************************************************************/
</script>















****************************************************** Utilisation du selecteur css [] *************************************************************************
// les possibilité de filtrer la valeur "choice" du paramètre name ou l'attribut en lui même
<script type="text/javascript">

$(this).filter("[name='choice']");
$(this).is('[name]');

$(this)[0].hasAttribute("name");
jQObject[0].hasAttribute("name");
/***************************************************************************************************************************************************************/
</script>
























****************************************************** url contenant '' *************************************************************************
<script type="text/javascript">

if(window.location.href.indexOf("franky") > -1) {
    alert("your url contains the name franky");
}
ou
if (location.href.match(/franky/)) { }
/****************************************************************************************************************************************************/
</script>


















































****************************************************** Fonction TweenLite pour affichage en blur inevrsé ***********************************************
<script type="text/javascript">
var _obj  = {
    item : $('.item'),
    delay:1,
    time1:0,
    time2:0.6,
    blur1:"blur(40px)",
    blur2:"blur(0px)"
};
function bluriz($obj){
  TweenLite.set($obj.item,$obj.time1,{filter:$obj.blur1});
  TweenLite.to($obj.item, $obj.time2, {filter:$obj.blur2,delay:$obj.delay});
}
bluriz(_obj);
</script>
/****************************************************************************************************************************************************/










************************************************************************************************ Picto rotation viewer **********************************************************************/


// HOOK HAUT >> */
<script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/latest/TweenLite.min.js" type="text/javascript" defer=""></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/latest/plugins/CSSPlugin.min.js" type="text/javascript" defer=""></script>
<script src="https://s3-us-west-2.amazonaws.com/s.cdpn.io/16327/SplitText.min.js" type="text/javascript" defer=""></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/1.19.0/TweenMax.min.js" type="text/javascript" defer=""></script>

<script type="text/javascript">
var img, imgSrc, urlImg, tween, imgOut,imgOver;
$('.icoHover figure').each(function(){ 
     $(this).children().css({pointerEvents:'none'});
});

$('.icoHover figure')
  .mouseenter(function() {
     img = $(this).find('img');
        imgSrc =  img.attr('src');
        urlImg = imgSrc.substring(0, imgSrc.length-4);
        imgOut = urlImg+'.jpg';
        imgOver = urlImg+'-hover.jpg';
        if(imgOver.substring(imgOver.length,imgOver.length- 16) === '-hover-hover.jpg'){ imgOver = imgOver.substring(0,imgOver.length- 16) + '-hover.jpg';}
        if(imgOut.substring(imgOver.length,imgOver.length- 10) === '-hover.jpg'){ imgOver = imgOver.substring(0,imgOver.length- 10) + '.jpg';}
        tween = TweenLite.to(img, 0.4, {rotationY:180, transformOrigin:"50% 50%", onComplete:function(){}});//TweenLite.to(img, 0.2, {rotationY:180, transformOrigin:"50% 50%"});
        setTimeout(function(){img.attr('src',imgOver)},100);
        return false;
  })
  .mouseleave(function() {
        tween = TweenLite.to(img, 0.4, {rotationY:0, transformOrigin:"50% 50%", onComplete:function(){}});//img.attr('src',imgOut);    TweenLite.to(img, 0.2, {rotationY:0, transformOrigin:"50% 50%"})
        setTimeout(function(){img.attr('src',imgOut)},100);
        return false;
  });
  /******************************************************************************************* END Picto Rotation viewer ********************************************************************/







****************************************************************************** // Animation lettre du titre dans le slider revolution (une fois celui-ci chargé) \\ *********************************************************
var sliderR = $('#rev_slider_3_1');
sliderR.on('revolution.slide.onloaded', function() {
    console.log('slider loaded');
    var tl = new TimelineLite, mySplitText = new SplitText(".txtTween", {type:"words,chars"}), chars = mySplitText.chars; //an array of all the divs that wrap each character
    TweenLite.set(".txtTween", {perspective:400});
    tl.staggerFrom(chars, 1, {opacity:0, scale:0, y:80, rotationX:360, transformOrigin:"0% 50% -50",  ease:Back.easeOut}, 0.1, "+=0");
});
/***********************************************************************************************************************************************************************************************/






***************************************************************** // Inclure un fichier js dans la page html \\ **********************************************
function include(file) {
    var oScript =  document.createElement("script");
    oScript.src = file;
    oScript.type = "text/javascript";
    document.body.appendChild(oScript);
}
 
// On l'utilise :
include("fichier.js");
/***********************************************************************************************************************************************************************************************/




******************************************* // Gestion attributs sur pseudo element :before \\**********************************************************************
// recupération de l'attribut color du pseudo élément >> .element:before
var color = window.getComputedStyle(document.querySelector('.element'), ':before').getPropertyValue('color');

// recupération de l'attribut content du pseudo élément >> .element:before
var content = window.getComputedStyle(document.querySelector('.element'), ':before').getPropertyValue('content');
/*****************************************************************************************************************************************************************/










</script>



************************************* Detect theme color and add li theme class ****************************************************************
<script type="text/javascript">

$('ul').each(function(e){
   if( $(this).parent().parent().hasClass('liPerso')){
       console.log('liPerso present');
       if( $(this).parents().hasClass('bgThemeColor')){
            console.log('themeColor2 detecté');
            $(this).parent().parent().addClass('liThemeColor2');
       }else if( $(this).parents().hasClass('bgThemeColor2') && !$(this).parent().parent().hasClass('liThemeColor')){
            console.log('themeColor detecté');
            $(this).parent().parent().addClass('liThemeColor');
       }
   }else{
        console.log('liPerso non present');
        $(this).parents('.wpb_text_column').addClass('liPerso');
       if( $(this).parents().hasClass('bgThemeColor')){
            console.log('themeColor2 detecté');
            $(this).parent().parent('.wpb_text_column').addClass('liThemeColor2');
       }else if( $(this).parents().hasClass('bgThemeColor2')){
            console.log('themeColor detecté');
            $(this).parent().parent().addClass('liThemeColor');
       }
   }
});

</script>
/********************************************************************************/







************************************* Detect is logged
****************************************************************
<script type="text/javascript">

islogged:function(){
        var cUid=sessionService.get('uid');
        alert("in loginServce, cuid is "+cUid);
        var $checkSessionServer=$http.post('data/check_session.php?cUid='+cUid);
        $checkSessionServer.then(function(){
            alert("session check returned!");
            console.log("checkSessionServer is "+$checkSessionServer);
        });
        return $checkSessionServer; // <-- return your promise to the calling function
    }
</script>








********************************************************* // Ecouteur live sur changement id ou classe dans un bloc \\ **********************************************************************************
<script type="text/javascript">

$(function() {
    (function($) {
        var MutationObserver = window.MutationObserver || window.WebKitMutationObserver || window.MozMutationObserver;

        $.fn.attrchange = function(callback) {
            if (MutationObserver) {
                var options = {subtree: false,attributes: true};
                var observer = new MutationObserver(function(mutations) {
                    mutations.forEach(function(e) {
                        callback.call(e.target, e.attributeName);
                    });
                });
                return this.each(function() {observer.observe(this, options);});
            }
        }
    })(jQuery);

    //Ajout de l'écouteur d'évéement attrchange
    $('body *').attrchange(function(attrName) {
        if(attrName=='class'){console.log('class changed');}else if(attrName=='id'){console.log('id changed');}else{/*Autre changement d'attribut*/}
    });
});
</script>

/*********************************************************************************************************************************************/
















***************************************************** //Envoie (GET) de paramètre depuis une url \\ *************************************************************
<script type="text/javascript">
var getUrlParameter = function getUrlParameter(sParam) {
    var sPageURL = decodeURIComponent(window.location.search.substring(1)),
        sURLVariables = sPageURL.split('&'),
        sParameterName,
        i;

    for (i = 0; i < sURLVariables.length; i++) {
        sParameterName = sURLVariables[i].split('=');

        if (sParameterName[0] === sParam) {
            return sParameterName[1] === undefined ? true : sParameterName[1];
        }
    }
};

// ******************* Utilisation
// ajout nouveau select dans form #testform
$('#testform').find('select:last-child').after('<select class="offres" name="filter[offre]"><option value="">type d\'offre</option><option value="1">vente</option><option value="2">location</option></select>');
var offre = getUrlParameter("offre");
if(offre){
    if(offre== 1 || offre == 2){
        if(offre== 1){/*Ventes*/}
        if(offre== 2){/*Locations*/}
    }
}
</script>

/****************************************************************************************************************************************************************************************************************************/






















<script type="text/javascript">

********************************************************************* // Affichage de la date en francais et de l'heure complète \\******************************************


 //On crée un objet de type date stockant la date actuelle
var d = new Date();

//On récupère les informatoins relatives à notre date
var dy = d.getFullYear();
var dmo = d.getMonth();
var dday = d.getDay();
var ddate = d.getDate();
var dh = d.getHours();
var dmi = d.getMinutes();
var ds = d.getSeconds();

/*On se rappelle que le premier élément d'un tableau
 *possède l'indice 0*/
var mois = ['janvier', 'février', 'mars', 'avril', 'mai',
            'juin', 'juillet', 'août', 'septembre',
            'octobre', 'novembre', 'décembre'];

var jour = ['dimanche', 'lundi', 'mardi', 'mercredi',
            'jeudi', 'vendredi', 'samedi'];

/*On utilise les informations récupérées comme indices pour
 *nos tableaux pour récupérer les valeurs en français*/
alert('Le ' +jour[dday]+' '+ddate+' '+mois[dmo]+' '+dy+
      '.\nIl est : ' +dh+'h '+dmi+'mn et '+ds+'s.');



// Condition pour faire disparaitre un élément à un jour précis
if( jour[dday] === 'lundi' && ddate === '14' && mois[dmo] === 'mai' && dy === '2018' ){
    $('.widgetOpen').fadeOut(0);
}
/*********************************************************************************************************************************************/











/************************************** Actualités avec date d'affichage******************************************************************************/

//On crée un objet de type date stockant la date actuelle
var d = new Date();

//On récupère les informations relatives à notre date
var dh = d.getHours();
var dmi = d.getMinutes();
var ds = d.getSeconds();
var ddate = d.getDate();
var dday = d.getDay();
var dmo = d.getMonth();
var dy = d.getFullYear();

/*On se rappelle que le premier élément d'un tableau
 *possède l'indice 0*/
var mois = ['janvier', 'février', 'mars', 'avril', 'mai','juin', 'juillet', 'août', 'septembre','octobre', 'novembre', 'décembre'];
var jour = ['dimanche', 'lundi', 'mardi', 'mercredi','jeudi', 'vendredi', 'samedi'];
// Condition pour faire disparaitre un élément à un jour précis
if( jour[dday] === 'dimanche' && ddate === '15' && mois[dmo] === 'juillet' && dy === '2018' && dh > 22){$('.ballon, .actuFoot, .drapeau').fadeOut(0);}

/*********************************************************************************************************************************************/











********************************************************************* // Affichage element en fonction des heures ouvertures \\******************************************
function dateFr(){
    var jour,mois;
     var joursTab = new Array("dimanche", "lundi", "mardi", "mercredi", "jeudi", "vendredi", "samedi");
     var moisTab = new Array("janvier", "fevrier", "mars", "avril", "mai", "juin", "juillet", "aout", "septembre", "octobre", "novembre", "decembre");
     var date = new Date();

     jour = joursTab[date.getDay()];
     var message = jour + " ";// nom du jour

     message += date.getDate() + " ";// numero du jour
     mois = moisTab[date.getMonth()];
     message += mois + " ";// mois
     message += date.getFullYear();
     console.log('date >> ' + message);
     if(jour === "dimanche" || jour === "samedi"){
         $('.btnRDV').remove();
     }
}
dateFr();

 function Horloge() {
    var date = new Date();
    var heure = date.getHours();
    var minute = date.getMinutes();
    var seconde = date.getSeconds();
    if(minute < 10)minutes = "0" + minute;
    if(seconde < 10)seconde = "0" + seconde;
    var completeHeure = date.getHours() + ":" + date.getMinutes() + ":" + date.getSeconds();
    if(heure < 9 || heure >13 || heure<14 && heure>18){$('.btnRDV').fadeOut();} else{$('.btnRDV').fadeIn();}
  }
  setInterval(Horloge, 1000);

/*********************************************************************************************************************************************/

</script>





































<script type="text/javascript">


/************************************************************************* Gestion des :not **************************************************************************/
//Gestion des selecteurs d'une classe non associée à une autre qui est spécifique 
[class *= "foo"] not([class *= "bar"]){
   //l'élement garantie qu'elle est liée à la class 'foo' et sans l'être à 'bar' 
   content: "Do stuff";
}

// Utiliser plusieurs classe non associées à la classe foo
.foo:not(.bar, .baz, .qux);

/*********************************************************************************************************************************************************************/






/***************************************************************************** Effet zoom sur background-image de vc_column-inner et redirection vers url au clic ********************************************************/

var tabBgImgs = [$('.bgImg0'),$('.bgImg1'),$('.bgImg2'),$('.bgImg3'),$('.bgImg4'),$('.bgImg5')];
//var linkImgsHome = ['scenes-echafaudages/','tribunes/','stands/','decoration/','securite/'];


var $this, bgImgVal,idBg;
$('.imgBg').each(function(i,t) {
    $this = $(this);
    var imgClass = $this.attr('class').split("bgImg").pop();
    var id = imgClass.substr(0,1); // => "1"

    $this.mouseover(function() {
        imgClass = $this.attr('class').split("bgImg").pop();
        console.log('class hover >>'+imgClass);
        id = imgClass.substr(0,1); 
        console.log();
        console.log(tabBgImgs[id].attr('class')+'        id hover >>'+id);
        $(this).css({cursor:'pointer',overflow:'hidden'});
        $(this).children().css({transition:'all .3s',transform:'scale(1.4)'});
    }).mouseout(function() {
        imgClass = $this.attr('class').split("bgImg").pop();
        console.log('class hover >>'+imgClass);
        id = imgClass.substr(0,1); 
        console.log('class out >>'+$(this).attr('class')+'               id out  >>'+id);
        $(this).children().css({transition:'all .3s',transform:'scale(1)'});
    });
    /*if(location.pathname === "/"){
        $this.click(function() {
            imgClass = $this.attr('class').split("bgImg").pop();
            id = imgClass.substr(0,1); // => "1"
            console.log('+++++++++++++++++++++++++++++++++'+'i >> '+i+' class >> '+id);
            console.log("liens >>" +linkImgsHome[id]);
            document.location.href = window.location.origin + window.location.pathname+linkImgsHome[id];
        });
    }*/
});

/******************************************************************************************************************************************************************************************************/
















************************************************************************* Suppression des <p> vide *********************************************************************
$( 'p:empty' ).each(function(i,t){$(this).remove();});

/********************************************************************************************************************************************************************/


























***************************************************************************** Cacher Action_bar si Top_bar is-sticky ********************************************************
var tb = $('#Top_bar');
var ab = $('#Action_bar');
$(window).scroll(function(){
    tb.hasClass('is-sticky') ? ab.fadeOut() : ab.fadeIn();
});
/******************************************************************************************************************************************************************************************/

























***************************************************************************** Vider un champs texte ********************************************************
$('.montext').empty();
/******************************************************************************************************************************************************************************************/






























****************************************************************************** affiche la valeur contenue dans chaque paragraphe du document ***************************************************
$('p').text(function(index,actuel) {
  alert('Paragraphe ' + (index+1) + ' : '+actuel);
});
/******************************************************************************************************************************************************************************************/














***************************************************************************Elastic button ***********************************************************************************************
https://cdnjs.cloudflare.com/ajax/libs/gsap/1.12.1/TweenMax.min.js
var $button = document.querySelector('.button');
$button.addEventListener('click', function() {
  var duration = 0.3,
      delay = 0.08;
  TweenMax.to($button, duration, {scaleY: 1.6, ease: Expo.easeOut});
  TweenMax.to($button, duration, {scaleX: 1.2, scaleY: 1, ease: Back.easeOut, easeParams: [3], delay: delay});
  TweenMax.to($button, duration * 1.25, {scaleX: 1, scaleY: 1, ease: Back.easeOut, easeParams: [6], delay: delay * 3 });
});

CSS >> 
.button { background: #3498db; width: 180px; padding: 4px 0; position: absolute; left: 50%; top: 50%; transform: translateX(-50%) translateY(-50%); border-radius: 3px; }
.button p { font-family: 'Roboto'; text-align: center; text-transform: uppercase; color: #FFF; user-select: none; } .button:hover { cursor: pointer; } 
.button:after { content: ""; display: block; position: absolute; width: 100%; height: 10%; border-radius: 50%; background-color: #927608; opacity: 0.4; bottom: -30px; } 


html >>
<div class="button">
  <p>Click me</p>
</div>
/*****************************************************************************************************************************************************************************************/























<script type="text/javascript">


******************************************************************************* paramètrage des attributs du logo **************************************************************
    $('#logo[title]').removeAttr('title');// Suppression Title
    $('#logo').find('img').attr('alt','alt du logo');// Ajout de l'attribut alt
/******************************************************************************************************************************************************************************/


























************************************************************************* Positionnement du texte à gauche pour les screen < 1024 sauf pour le footer *****************************
if($w.width() <= 1024 ){
    $('.wpb_wrapper p').each(function(){
        var t = $(this);
        t.css({'text-align':'left'});
        
    });
}
if($w.width() <= 1024 ){
    $('.rowFooter p').each(function(){
          var t = $(this);
          t.css({'text-align':'center'});
    });
}

*******Methode avancé ******************
/**************************** Gestion alignement texte en screen <1024 ***********************************/
if($w.width() <= 1024 ){
    $('.wpb_wrapper p').each(function(){
        var $t = $(this);
        if( !$(this).hasClass('center')){
            $t.css({'text-align':'left'});
        }else{
            $t.css({'text-align':'center'});
        }
    });
}
/**********************************************************************************************************************************************************************************/



























*************************************** Ajout du bouton supplemenatire au menu pour créer un effet de chevauchement au hover ****************************************
var titleBtn;
$('#Header #Top_bar .menu>li>a span:not(.description)').each(function(){titleBtn = $(this).text();$(this).after('<span class="moverBtn">'+titleBtn+'<span>');});
if($('.moverBtn').children().is('span')){$('.moverBtn span').remove();}

/**********************************************************************************************************************************************************************************/














********************************** Changer le premier picto animé lié a une colonne (dans une rangée ) *********************
setTimeout(changePicto,800);

var firstPicto = $('.colPicto:eq(0) img');
function changePicto (){
    $('.colPicto:eq(0) img').each(function(){
        $('.colPicto:first-child img').attr('src');
            $(this).attr('href','/wp-content/uploads/sites/4643/2017/07/picto-experience2.png');
            $(this).attr('src','/wp-content/uploads/sites/4643/2017/07/picto-experience2.png');
            console.log('colPicto  href : '+$(this).attr('href')+'            >>> src : ' + $(this).attr('src'));
            $(this).css('transform','scale(0.9)');
        
    });
}
/********************************************************************************/













































****************************************************************************** Animation info contact sur mappy ******************************
if($w.width() > 767 ){
    $(".contactInfo").slideUp( 10 );
    $(".contactInfo").css({pointerEvents:'none',position:"absolute"});
    $(".mapZone").hover();
    $(".mapZone").hover(
        function(){
            $(".contactInfo").slideDown( "slow");
            $(".contactInfo").stop().animate({width:'300px',height:'100%',top:'0',opacity:'1'},500);
            //$(this).find('iframe').css({width:'50%'});
        }, 
        function(){
            $(".contactInfo").slideUp( "slow");
            $(".contactInfo").stop().animate({width:'300px',height:'0%',top:$(this).height(),opacity:'0'},500);
            $(this).children().css({position:"relative",left:'0', width:'100%',transition:'all .3s'});
    });
}
/*********************************************************************************************************************************************/






























*********************************** Ajout d élements dans la page mentions légales **************************************************************** 
//Ajouter la classe mentions dans le bloc de texte contenant les mentions
$('.mentions').find('h2').first().before('<p class="newMentions"> ici les nouvelle<br /> mentions légales</p>');
/*********************************************************************************************************************************************/









































*************************************************************** Detect bottom position scrolling ******************************************************
$(window).scroll(function() {
	   if($(window).scrollTop() + $(window).height() == $(document).height()) {
		   console.log("scroll position is bottom");
		  $($("#wpr-contact-bar").detach()).appendTo("#Footer");
		  TweenMax.to($("#wpr-contact-bar"),0.6,{opacity:0,onComplete:viewCB});
		  function viewCB(){
			  console.log('viewCB');
			  $('#wpr-contact-bar').addClass('is-bottom');
			  
			  TweenMax.to($("#wpr-contact-bar"),0.3,{opacity:1,onComplete:function(){ }});
		  }
	   }else{
		   console.log("scroll position isnt bottom");
		   $($("#wpr-contact-bar").detach()).appendTo("#Wrapper");
		   $('#wpr-contact-bar').removeClass('is-bottom');
	   }
	});
	******************************************************************************************************************************************************************
	
	
	
	
	
	























************************************************* Récupérer une valeur numerique dans une chaine de caractères puis traduire le result-cound de woocomerce en fr sans perdre la valeur **************************************************

setTimeout(tradCount,300);


function tradCount(){
    var txtCount = $('.woocommerce-result-count').text();
    var nbCount = txtCount.match(/\d+/g).join('');
    var newTxtCount = "nombre de produits visibles "+nbCount.toString();
    $('.woocommerce-result-count').text(newTxtCount);
    console.log('number to result count =  '+nbCount, 'newTextCount =  '+ newTxtCount);
} 

/*********************************************************************************************************************************************/



************************************************* rechercher et remplacer mail des mentions légales une valeur *************************************************


setTimeout(searchMail,300);
function searchMail(){
    var mail = $('.vc_custom_1435138614289 .pj-shortcode:eq(2) a').each(function(i,t){
        if($(this).attr('href','mailto:c.jouglens@sofed.fr')){
            $(this).replaceWith('<a href="mailto:contact@sofed.fr">contact@sofed.fr</a>');
        }
    });
}
********************************************************************************************************************************************************************************





************************************************************** Debug Prolive problème description vidé **************************************
var id =  [];
var idNb = [];
var descProlive;
var tabDesc = [];
var titleContent = [];
var items = [];

setTimeout(startProL,800);
function startProL(){
$('.accordion').on('click',function(e){
        $('.accordion-item').each(function(i,t){
            items.push($(this));
            id.push(items[i].attr('id').toString());
            idNb.push(id[i].substring(id[i].length-1,id[i].length));
            descProlive= items[i].find('.title-content').text();
            var tabDesc = descProlive.split(',');
            // console.log("id >> "+id[i], "    idNb >> "+ idNb[i],'descProlive >> '+descProlive,'tabDesc >> '+tabDesc);
            setTimeout(replaceDesc,200);
            function replaceDesc(){
                items[i].siblings('.right-column').find('p:empty').remove();
                $('#pj-prolive-hc-'+i).find('p:eq(0)').replaceWith("<p class='description'>"+ tabDesc +"</p>");
            }
        });
    });
}

/*********************************************************************************************************************************************/





































********************************************************************************************** Gestion formulaire de contact (injection mentions et animation li)*******************************
var nbElemForm = 0;
// Mention legales
ml = "<div class='mentionsLegales'><span class='requiredML'>*</span> Mentions obligatoires<p class='contentML'><em>« Conformément à la loi Informatique et Libertés du 6 janvier 1978 modifiée, vous disposez de droits d'accès, de modification et d’opposition aux données qui vous concernent. Vous pouvez exercer ces droits à tout moment sous réserve de justifier de votre identité par courrier électronique à l’adresse email de contact[at]capexconseilsmlv.fr ou par voie postale à l’adresse suivante Capex Conseils, 14 AVENUE DE SARIA 77700 SERRIS, France. »</em></p></div>";
if( location.pathname === " /contact-plan/ "){

   $(".box:eq(1)").css("width","32.4px ");
     // Suppression des H3 auto généré par les formulaire dans la page contact et devis
    var myH3 = $('.comment-respond').find('h3');
    myH3.remove();
    $('.comment-respond').find('h3').replaceWith('<span>' + $(this).text + '</span>');
    $('.gform_footer').after(ml);//Ajout mentions obligatoires formulaire de contact
    $('.gform_fields li').each(function() {nbElemForm ++;$(this).css({position: 'relative', left: '-300px', opacity: '0'});});
    sH = $w.scroll( function () {
        target = $('.gform_wrapper');
        st = Math.round($w.scrollTop());
        targetVisiblePos = Math.round(target.offset().top - st);
        if (Math.round($w.scrollTop()) >= targetVisiblePos ){lancementAnimForm();}
    });

}
function lancementAnimForm (){
    $('.gform_fields li ').each(function(j,elem) {
        var lth = $('.gform_fields li').length;
        console.log('animation form lancé n°'+(j+1)+'/'+lth,'target :'+ $('.gform_fields li:eq('+j+')').attr('class'));
        $('.gform_fields li:eq('+j+')').delay(j*100).animate({position: 'relative', transform:'rotateZ(0)', left: '0', opacity: '1',easing: "linear",duration:(j+1000+'')});
       if($('.gform_fields li:eq('+lth+')').hasClass('gfield_visibility_visible')) { $w.off("scroll", sH );}
    });
}
/**********************************************************************************************************************************************************************************/



































******************************************************Changement du lien de la home si positionné dessus ***********************************************************
if(location.pathname === '/'){
    $("#menu li:eq(0) a span").text(" Pôles Capex ");
     $('#menu li:eq(0) a').attr('href','/poles-capex/');
}
/*******************************************************************************************************************************************************************/













/*************************************** Cherche un couleur et la remplace *************************************/
function colorReplace(findHexColor, replaceWith) {
  // Convert rgb color strings to hex
  function rgb2hex(rgb) {
    if (/^#[0-9A-F]{6}$/i.test(rgb)) return rgb;
    rgb = rgb.match(/^rgb\((\d+),\s*(\d+),\s*(\d+)\)$/);
    function hex(x) {
      return ("0" + parseInt(x).toString(16)).slice(-2);
    }
    return "#" + hex(rgb[1]) + hex(rgb[2]) + hex(rgb[3]);
  }

  // Select and run a map function on every tag
  $('*').map(function(i, el) {
    // Get the computed styles of each tag
    var styles = window.getComputedStyle(el);

    // Go through each computed style and search for "color"
    Object.keys(styles).reduce(function(acc, k) {
      var name = styles[k];
      var value = styles.getPropertyValue(name);
      if (value !== null && name.indexOf("color") >= 0) {
        // Convert the rgb color to hex and compare with the target color
        if (value.indexOf("rgb(") >= 0 && rgb2hex(value) === findHexColor) {
          // Replace the color on this found color attribute
          $(el).css(name, replaceWith);
        }
      }
    });
  });
}

















**************************************************** Change la couleur du premier mot (ou lettre) des title en fonction de la classe detecté **************************************************************
$('.myH1,.myH2,.myH3,.myH4').each(function() {
    var h = $(this).html();
    var index = h.indexOf(' ');
    if(index == -1) {index = h.length;}

    if($(this).hasClass('firstBlack') ){$(this).html('<span class="titleBloc"><span class="black">' + h.substring(0, index) + '</span>' + h.substring(index, h.length)+'</span>');}
    if($(this).hasClass('firstRed') ){$(this).html('<span class="titleBloc"><span class="red1">' + h.substring(0, index) + '</span>' + h.substring(index, h.length)+'</span>');}
    if($(this).hasClass('firstWhite') ){$(this).html('<span class="titleBloc"><span class="white">' + h.substring(0, index) + '</span>' + h.substring(index, h.length)+'</span>');}

    if($(this).hasClass('firstLBlack') ){$(this).html('<span class="titleBloc"><span class="black">' + h.substring(0, 1) + '</span>' + h.substring(1, h.length)+'</span>');}
    if($(this).hasClass('firstLRed') ){$(this).html('<span class="titleBloc"><span class="red1">' + h.substring(0, 1) + '</span>' + h.substring(1, h.length)+'</span>');}
    if($(this).hasClass('firstLWhite') ){$(this).html('<span class="titleBloc"><span class="white">' + h.substring(0, 1) + '</span>' + h.substring(1, h.length)+'</span>');}
});
/******************************************************************************************************************************************************************************************/


**************************************************** Change la couleur du premier mot (ou lettre) des title en fonction de la classe detecté **************************************************************
$('.myH1').each(function() {
    var h = $(this).html();
    var index = h.indexOf(' ');
    if(index == -1) {index = h.length;}

    if($(this).hasClass('firstWThemeColor') ){$(this).html('<span class="titleBloc"><span class="themeColor">' + h.substring(0, index) + '</span>' + h.substring(index, h.length)+'</span>');}
    if($(this).hasClass('firstLThemeColor') ){$(this).html('<span class="titleBloc"><span class="themeColor">' + h.substring(0, 1) + '</span>' + h.substring(1, h.length)+'</span>');}
});
/******************************************************************************************************************************************************************************************/




********************************************************* Recuperation premier caractère pour intergration lettrine **************************************************************
$('.lettrine').each(function(){
    var needle = $(this).find('p').text().substring(0,1);
    console.log(needle);
    $(this).before("<span class='decoLettrine'>"+needle+"</span");
    $(this).find('decolttrine').css({'position':'absolute','font-size':'1500%','line-height':'1em','opacity':'.2','left':'0','top':'0','color':'orange','border-left':'solid 9px white','height':'20%','font-family':'sans-serif'});
});
$('.lettrine2').each(function(){
    var needle = $(this).find('p').text().substring(0,1);
    console.log(needle);
    $(this).before("<span class='decoLettrine2'>"+needle+"</span");
    $(this).find('decolttrine2').css({'position':'absolute','font-size':'1500%','line-height':'1em','opacity':'.2','left':'0','top':'0','color':'orange','border-left':'solid 9px #020202','height':'20%','font-family':'sans-serif'});
    //$(".lettrine-"+needle+':before').css({"content":needle.toString(),"position":"absolute","font-size": "800%","opacity": ".5","left": "0","color": "yellow", "border-left":" solid 9px white","height": "20%"});
});
/********************************************************************************************************************************************************************************/



*************************************************************** Lettrine dynamique via end "caractere class" **************************************************************
// .txtStyle comporte une classe composé de lettrine- "lettre à mettre en valeur"
// Une classe decoLettrine sera ajouté avant le bloc et se verra attribué la lettre indué en fin de classe
var haystack = document.querySelectorAll(".txtStyle");
if($(".txtStyle")){
    for (var h=0; h<haystack.length; h++) {
      for (var i=0; i<haystack[h].classList.length; i++) {
        var c = haystack[h].classList[i];
        if (c.indexOf("lettrine-") === 0) {
          var needle = c.split("-").pop();
          console.log(needle);
          $(".lettrine-"+needle).before("<span class='decoLettrine'>"+needle+"</span");
          //$(".lettrine-"+needle+':before').css({"content":needle.toString(),"position":"absolute","font-size": "800%","opacity": ".5","left": "0","color": "yellow", "border-left":" solid 9px white","height": "20%"});
        }
      }
    }
}
/*************************************************************************************************************************************************************/








*************************************************************** Generateur de degradé **************************************************************
var rgbR = {r:255,g:0,b:0};
function randomArbitraire(min, max) {
  return Math.round(Math.random() * (max - min) + min);
}
//var dataArray = ["bgColorAuto1", "bgColorAuto2", "bgColorAuto3", "bgColorAuto4","bgColorAuto5","bgColorAuto6"];
var dataArray = [];
$('.bgColorAuto > .vc_column-inner').each(function(index,elem){
    dataArray[index] = "bgColorAuto"+(index+1);
    console.log(dataArray[index]),
    listItemsHandler(index, $(this), dataArray[index]);
    var  t = $(this);
    colorCalc = ((index+1)*110);//noir>>jaune
    colorCalc = ((index+10)*10);//noir>>vert
    colorCalc = ((index+1)*101);//noir>>violet
    colorCalc = ((index+1)*111);//noir>>gris
    colorCalc = ((index+1)*100);//noir>>rouge
    colorCalc = ((index+100)*1);//noir>>bleu
    rgbR.r = 0;
    rgbR.g =randomArbitraire(1,10);
    rgbR.b= 0;
    //t.css('background-color',"#"+colorCalc).css('filter','brightness(10%)');
    t.css('background-color',"rgb:"+rgbR.r+','+rgbR.g+','+rgbR.b);
    console.log('colorCalc : '+colorCalc +  '|     color 2 >> '+index+''+index+''+index+'   | result rgb color : ' + t.css('background-color') + '   | rgbaRandom : '+rgbR.r+','+rgbR.g+','+rgbR.b);
    
});

function listItemsHandler($index, $item, $data){
    console.log('index >> '+$index + ",   item >>  " + $item + " , data >>  " + $data);
    $item.parent().addClass(dataArray[$index]);
    //$item.eq('.activebgColorAuto').addClass($data[$index]);
}
/*************************************************************************************************************************************************************/







/**** Tooltip animate */

// Appliquer la classe tooltipO sur les "image seule"
var applyTooltip = function(){
    console.log('function applyTooltip lancé !!!');
    clearTimeout(applyTooltip);
    $('.tooltipO').each(function(i,t){
        $(this).find('.vc_single_image-wrapper').after('<div class="myTooltip">'+$(this).find('img').attr('alt')+'</div>');
        console.log('ajout des Tooltip lancé !!!' + 'n°'+(i+1));
    });
};
$('.tooltipO').hover(function(){
    console.log('hover img tooltip !!!');
    var imgWidth = $(this).find('.vc_single_image-wrapper').width();
    console.log('largeur bloc : ' + $(this).width() + ',    largeur image : '+imgWidth);
     $(this).find('.myTooltip').animate({width: imgWidth});
});

var styleTooltip = {background: 'rgba(0, 0, 0, 0.5)',height: '30px',width: '200%',position: 'absolute',left: '100%',bottom: '-30px',color: 'white',lineHeight: '30px',textAlign: 'center',opacity: '0',transition: 'all .6s'};
var styleTooltipHover = {width: '98.3%',left: '50%',transform: 'translateX(-50%)',bottom: '5px',opacity: '1',transition: 'all .6s'};
$('.tooltipO:hover figure .myTooltip').css(styleTooltipHover);
$('.tooltipO figure .myTooltip').css(styleTooltip);
$('.tooltipO:hover > figure > .myTooltip').css({'width': '98.3%','left': '50%','opacity': '1','transform': 'translateX(-50%)','bottom': '5px','transition': 'all .6s'});
$('.tooltipO > figure > .myTooltip').css({'background': 'rgba(0, 0, 0, 0.5)','height': '30px','width': '120%','position': 'absolute','left': '0','bottom': '-30px','color': 'white','line-height': '30px','text-align': 'center','opacity': '1','transition': 'all .6s'});
                                            
applyTooltip();






















****************************************** ELEMENT SLIDOWN & up ********************************************** *
if($w.width() <= 765 && actif === 0){
        console.log("ouverture menu");
        $('.blocAnim').slideDown();
        $(this).addClass('actif');
        actif=1;
    }
if($w.width() >= 766 && actif === 1){
    console.log("fermeture menu");
    $('.blocAnim').slideUp(300,"linear");
    $(this).removeClass('actif');
    actif=0;
}
console.log('actif >> ' + actif);
$(".btnAnim, .btnAnim:after").click(function(e){
    if( $(this).next().hasClass('blocAnim') ){
        console.log('bloc anim est le parent de son bouton');
        $(this).next().slideToggle( 500,"linear");// Pour gérer l'élément situé en dessous du bouton
    }else{
        console.log("utilisation de siblings pour activer l'anim");
        $(this).parent().parent().siblings('.blocAnim').slideToggle( 500,"linear");// Pour cibler le bloc depuis le bouton
    }
});
/**** add slidetoogle in h3 *****/
$(".myH3").each(function(i,e){
    $(this).addClass('btnAnim');
    $(this).next().addClass('blocAnim');
});

CSS >>

.myH3 {
    font: normal normal 700 semi-condensed 16px/20px 'Josefin Sans',serif;
    text-transform: uppercase;
    font-size: 18px;
    line-height: 29px;
    background-color: #8c8c8c;
}
.btnAnim {
    background: rgba(0,0,0,.5);
    padding: 30px 90px;
    position: relative;
    cursor: pointer;
    color: black;
    border-right: solid 1px #4e4e4e;
    border-left: solid 1px #b7b7b7;
    transition: all 0.6s;
}
.btnAnim:hover {
    background: rgba(0,0,0,.8);
    color: white;
    transition: all 0.6s;
}
.btnAnim:hover:before {
    content: '+';
    font-size: 4em;
    line-height: 35px;
    color: white;
    transform: translateY(-50%) rotate(90deg);
    transition: all .4s;
    cursor: pointer;
}
.btnAnim:before {
    content: '+';
    position: absolute;
    font-size: 3em;
    line-height: 35px;
    text-align: center;
    background-color: orange;
    height: 50px;
    width: 50px;
    top: 50%;
    left: 90%;
    z-index: 1;
    border-radius: 50px;
    color: black;
    transform: translateY(-50%) rotate(0deg);
    transition: all .4s;
    cursor: pointer;
}

/* En absolute ***/
.blocAnim {
    position: absolute;
    padding: 30px;
    width: 90.2%;
    background-color: orange;
    color: white;
    border-width: 0 2px 2px 2px;
    border-color: transparent #a75312 #a75312 #a75312;
    border-style: solid inset inset inset;
    z-index: 2;
}
.blocAnim li {
    color: white;
    margin: -11px 0 0 0!important;
    font-size: 1.2em;
    line-height: 1.3em;
    list-style-type: circle;
    top: -30px;
    position: relative;
}
.blocAnim li:before {
    position: relative;
    top: 11px;
    content: '>>';
    left: -9px;
    color: #ffc966;
    font: normal normal 100 semi-condensed 64px/51px 'Josefin Sans',serif;
    z-index: 2;
    text-shadow: 0 0 7px rgb(193, 53, 0);
    font-family: UnifrakturMaguntia;
}
.blocAnim div ul {
    list-style-image:url(/wp-content/uploads/sites/3410/2017/04/liPoint.svg#pointList);
}

/**************************************************************************************************************************/
























************************************************* SUB MENU TOP_BAR SMOOTHSCROLL ANCRE ****************************************
/******************************** SUB Menu *************************************/
if(location.pathname === "/gamme-actifas/") {
    $("#Top_bar").after("<div class='sous-menu'><span class='liens'><a href='#actixane'><span class='element'>Actixane</span></a><a href='#actiquartz'><span class='element'>Actiquartz</span></a><a clas='last-lien' href='#actifuge'><span class='element'>Actifuge</span></a></span></div>");
}
if(location.pathname === "/enduit-chaux/") {
    $("#Top_bar").after("<div class='sous-menu'><span class='liens'><a href='#enduitmonorex'><span class='element'>Enduitmonorex</span></a><a href='#enduitparlumiere'><span class='element'>Enduitparlumiere</span></a><a clas='last-lien' href='#enduitparexal'><span class='element'>Enduitparexal</span></a></span></div>");
}
/*** SMOOTH SCROLL ***/
$('a[href*="#"]:not([href="#"])').click(function() {
  //if (location.pathname.replace(/^\//,'') == this.pathname.replace(/^\//,'') && location.hostname == this.hostname) {
    var target = $(this.hash);
    target = target.length ? target : $('[name=' + this.hash.slice(1) +']');
    if (target.length) {
      $('html, body').animate({
        scrollTop: target.offset().top-60
      }, 1000);
      return false;
    }
  //}
}); 

CSS >>
/************************************** SUB-MENU *****************************************/
.sous-menu {
    position: relative;
    z-index: 2;
    width: 100%;
    background-color: #fff;
    height: 45px;
    box-shadow: 1px 1px 8px rgba(0,0,0,0.3);
}

.sous-menu .liens a:hover::before {
    content: '';
    position: absolute;
    background: orange;
    height: 2px;
    width: 95%;
    top: 0;
    left: 50%;
    transform: translateX(-50%);
    transition: all .6s;
}
.sous-menu .liens a:before {
    content: '';
    position: absolute;
    height: 1px;
    width: 0;
    top: 0;
    left: -50%;
    transform: translateX(-50%);
    background: rgba(255, 165, 0, 0);
    transition: all .9s;
}
span.liens {
    position: absolute;
    top: 50%;
    transform: translateY(-50%);
    height: 100%;
}
@media only screen and (min-width:1240px) {span.liens {left: 228px;}}
@media only screen and (max-width:1239px) {span.liens {left: 20px;}}

.liens a {
    max-height: 100%;
    padding: 15px 13px;
    position: relative;
    top: 25%;
    transform: translateY(-50%);
    transition: all .3s;
    text-decoration: none;
    color: #262626;
    font-size: 14px;
}
.liens a:hover span {
    background-color: #4b4b4b;
    color: orange;
    padding: 15px;
}
.liens a span {
    background-color: #fff;
    color: #333;
    padding: 0 15px;
    transition: all .4s;
}
.liens a:after {
    content: '';
    position: absolute;
    width: 1px;
    height: 40px;
    background: linear-gradient(to bottom, rgba(147,145,145,0) 0%,rgba(147,145,145,1) 22%,rgba(147,145,145,1) 50%,rgba(147,145,145,1) 76%,rgba(147,145,145,0) 100%);
    right: 0;
    top: 3px;
    opacity: 0.5;
}
.liens a .last-lien:after{display:none;}
a.last-lien:after {display: none;}

/*************************************************************************************************************************************************************************************/





























****************************************************************************** Deco titre footer ***********************************************************************
.titleFooter:first-letter {color: yellow;font-weight: 600;font-size: 150%;text-decoration: inherit;}
.titleFooter:after {border-bottom: solid 1px white;position: absolute;height: 33px;width: 51%;content: '';left: 50%;transform: translateX(-50%);}
.titleFooter {font-size: 120%;letter-spacing: .3em;color: white;}
/**********************************************************************************************************************************************************************/


















**************************************************************************************Creation de tooltip sur vc grid *************************************************************
    // Ajout de tootltip en recupérant les alt des images
    var to  = setTimeout(applyTooltip,2000);
    var applyTooltip = function(){clearTimeout(applyTooltip);$('.vc_grid-item-mini').each(function(e){$(this).find('.vc_gitem-animated-block').after('<div class="myTooltip">'+$(this).find('img').attr('alt')+'</div>');});};
$('.vc_grid-item').css({padding: '0'});
$('.vc_grid-item-mini > div').css('position','relative');
$('.vc_grid-item-mini:hover > div.myTooltip').css({background:'rgba(0, 0, 0, 0.5)',height: 'auto',width: '94.7%',position:'absolute',left: '0',bottom:'5px',color:'white',lineHeight:'30px',textAlign:'center',opacity:'1',transition:'all .6s'});
$('.vc_grid-item-mini > div.myTooltip').css({background: 'rgba(0, 0, 0, 0.5)',height: 'auto',width: '94.7%',position: 'absolute',left: '0',bottom: '-30px',color: 'white',lineHeight: '30px',textAlign: 'center',opacity: '0',transition: 'all .6s'});


/**********************************************************************************************************************************************************************************/


















********************************************************************* Bouton show hide element **********************************************************************************
if($w.width() < 768){
    $('.blocAvantage,.blocAnim').slideDown();
}else if($w.width() >= 768){
    $('.blocAvantage,.blocAnim').slideUp(300,"linear");
}
//$('.blocAvantage,.blocAnim').slideUp('slow');
var actif = 1;
console.log('actif >> ' + actif);

$(".btnInfo, .btnInfo:after,.btnInfo2, .btnInfo2:after").click(function(e){
     $(this).siblings('.blocAvantage,.blocAnim').slideToggle( 300,"linear");
});

if($w.width() < 768){
    $('.blocAvantage,.blocAnim').slideDown();
    $(this).addClass('actif');
    actif=1;
}else if($w.width() >= 768){
    $('.blocAvantage,.blocAnim').slideUp('slow');
    $(this).removeClass('actif');
    actif=0;
}
/*********************************************************************************************************************************************************************************/









*************************************** Traitement de tableaux et objet via la boucle each ***********************************************
var substr = [1, 2, 3, 4];
$.each(substr , function(index, val) { 
  console.log(index, val)
});

var myObj = { firstName: "skyfoot"};
$.each(myObj, function(propName, propVal) {
  console.log(propName, propVal);
});
**********************************************************************************************************************************************************











*********************************************** REMPLACEMENT DU H4 GEBERE DANS LES COLONNES DU FOOTER *****************************************************************************
var h4Content = $(".one-third").find("h4").each(function(){
$(this).replaceWith("<span class='myH4'>"+$(this).text()+"</span>");
});
/********************************************************************************************************************************************************************************/























****************************** ajout de classe pour la premiere lettre du h1 et h2 evite l ajout d un :first-letter pour ne pas interagir avec le before **************************
var x= $(".myH1:eq(0)").text();
var y = $(".myH2:eq(0)").text();
var textH1='<span class="firstL-H1">'+x.charAt(0)+'</span>';
var textH2='<span class="firstL-H2">'+x.charAt(0)+'</span>';
$(".myH1:eq(0)").html(textH1 + x.slice(1,x.length));
$(".myH2:eq(0)").html(textH2 + x.slice(1,x.length));
/********************************************************************************************************************************************************************************/










































****************************************************  modification du premier h2 en h1 si page pack immo *****************************************************************************
if(location.pathname === "/location-immobilier/" || location.pathname === "/vente-immobilier/"){
    console.log('page vente');
    $("#Content").find('h2').eq(0).replaceWith(function() {
         return '<h1 class="myH1">' + $(this).text() + '</h1>';
     });
}
/***************************************************************************************************************************************************************************************/









































****************************************************Remplacement separateur des horaires ****************************************************************************
$('.tabHours td').each(function(){
    var txt = $(this).text();
    txt.replace('00  14h00','00 / 14h00');
     console.log('texte horraires remplacé >> ' + txt);
});
/*******************************************************************************************************************************************************************/






































********************************************************* Generateur de couleur degradé sur colonne **************************************************************
var colorCalc;
var rgbR = {r:255,g:0,b:0};
function randomArbitraire(min, max) {
  return Math.round(Math.random() * (max - min) + min);
}
//var dataArray = ["bgColorAuto1", "bgColorAuto2", "bgColorAuto3", "bgColorAuto4","bgColorAuto5","bgColorAuto6"];
var dataArray = [];
$('.bgColorAuto > .vc_column-inner').each(function(index,elem){
    dataArray[index] = "bgColorAuto"+(index+1);
    console.log(dataArray[index]),
    listItemsHandler(index, $(this), dataArray[index]);
    var  t = $(this);
    colorCalc = ((index+1)*110);//noir>>jaune
    colorCalc = ((index+10)*10);//noir>>vert
    colorCalc = ((index+1)*101);//noir>>violet
    colorCalc = ((index+1)*111);//noir>>gris
    colorCalc = ((index+1)*100);//noir>>rouge
    colorCalc = ((index+100)*1);//noir>>bleu
    rgbR.r = 0;
    rgbR.g =randomArbitraire(1,10);
    rgbR.b= 0;
    //t.css('background-color',"#"+colorCalc).css('filter','brightness(10%)');
    t.css('background-color',"rgb:"+rgbR.r+','+rgbR.g+','+rgbR.b);
    console.log('colorCalc : '+colorCalc +  '|     color 2 >> '+index+''+index+''+index+'   | result rgb color : ' + t.css('background-color') + '   | rgbaRandom : '+rgbR.r+','+rgbR.g+','+rgbR.b);
    
});
function listItemsHandler($index, $item, $data){
    console.log('index >> '+$index + ",   item >>  " + $item + " , data >>  " + $data);
    $item.parent().addClass(dataArray[$index]);
    //$item.eq('.activebgColorAuto').addClass($data[$index]);
}
/******************************************************************************************************************************************************************/






























****************************** Creation de nth-of-type en jquery **************************

$.expr[':']['nth-of-type'] = function(elem, i, match) {
    var parts = match[3].split("+");
    return (i + 1 - (parts[1] || 0)) % parseInt(parts[0], 10) === 0;
};

Utilisation >> 
$("textarea:nth-of-type(4n)") pour choisir le 4eme textarea
/****************************************************************************************/









function(){
    p=prompt(Images%20Search:','');
    if(p){
     document.location.href='http://images.google.com/images?query='+escape(p)+'&as_rights=cc_publicdomain';
    };
  }








****************************************** Bookmark ***********************************************
$("a#Bookmark").click(function () {
               var bookmarkUrl = this.href;
               var bookmarkTitle = this.title;
               //alert(bookmarkurl);
               if ($.browser.mozilla) // For Mozilla Firefox Bookmark
               {
                   window.sidebar.addPanel(bookmarkTitle, bookmarkUrl, "");
               }
               else if ($.browser.msie || $.browser.webkit) // For IE Favorite
               {
                   window.external.AddFavorite(bookmarkUrl, bookmarkTitle);
               }
               else if ($.browser.opera) // For Opera Browsers
               {
                   $(this).attr("href", bookmarkUrl);
                   $(this).attr("title", bookmarkTitle);
                   $(this).attr("rel", "sidebar");
                   $(this).click();
               }
               else // for other browsers which does not support
               {
                   alert('Please hold CTRL+D and click the link to bookmark it in your browser.');
               }
               return false;
           });















****************************************** Chercher si une chaine de caractère est presente ou non **********************************************************************************************************

//$('.facebook a').attr("href","https ://www.facebook.com/Permis-de-Conduire-265893070217181/");
//setTimeout(changeFB,1500);
var chaine = "Si ton tonton";
var result = /\bton\b/.exec(chaine); // On cherche à récupérer le mot « ton »

if (result) { // On vérifie que ce n'est pas null
    alert(result); // Affiche « ton »
}


//$('.facebook a').attr("href","https ://www.facebook.com/Permis-de-Conduire-265893070217181/");
//setTimeout(changeFB,1500);
$('.facebook a').html().replace('https://autoecole-permisdeconduire.site-privilege.pagesjaunes.fr', 'https ://www.facebook.com/Permis-de-Conduire-265893070217181/');
function changeFB(){
    $('.facebook a').html(function(i, htm) {
         console.log(htm.split("/")[3]);
        return htm.split("/")[3];
       
    });
}



//Methode 2 : Remplacer un mot dans la chaine
var sentence = 'Je m\'appelle Sébastien';
var result = sentence.replace(/Sébastien/, 'Johann');
alert(result); // Affiche : « Je m'appelle Johann »
/************************************************************************************************************************************************************************************************/






/****** rechercher un mot et l'entourer d'une span  ***/
$("h1:contains('A3S')").html(function(_, html) {return html.replace(/(A3S)/g, '<span class="styliz">$1</span>');});
$("h2:contains('A3S')").html(function(_, html) {return html.replace(/(A3S)/g, '<span class="styliz">$1</span>');});



/*** Autre methode ***/
 var text = $('#id1 p:contains("dogsss")').text();
 $('#id1 p:contains("dogsss")').text(text.replace('dog', 'doll')); 





/************* Replacement images ***/
var phoneUrl = "/wp-content/uploads/sites/2648/2018/05/affiche_EB_action_printempsFHD-1.jpg";
function adjustImage(){
if($(window).width() <= 900) {
        console.log('test');
        $('#promot img').attr('src',phoneUrl);
                $('#promot img').attr('srcset',phoneUrl);

       // $('#promot img').css({"min-width": "900px"});
    }
}
$(document).ready(function(){

    adjustImage();
});

$( window ).resize(function() {
  adjustImage();
}); 
 
/*********************************************************************************************/













/********************************************************************** Creation objets anime si visible ****************************************************/
//
for( var i=0; i<3; i++){
  nb= i+1;
  $('.bloc'+nb).after("<div class='img"+nb+"'></div>");
  $('.bloc'+nb);
}


//
$('.uniqclasses').addClass('wpb_animate_when_almost_visible')}
$(document).bind('scroll', function(e) {
        if($('.uniqclasses').hasClass('animated')){
            var tl2 = new TimelineLite;
            tl2.staggerFrom('.pictos', 5, {left:-1600,rotation:-720,  ease:Power1.easeOut}, 0.5, "+=0"); 
        }
    });
$(document).bind('scroll', function(e) {
    if($('.bloc1').hasClass('animated')){$('.img1').animate({opacity: 1,right: "31%",display:"block"}, 2000, function() {$(this).css({display:'block'});});}
    if($('.bloc2').hasClass('animated')){$('.img2').animate({delay: 500,opacity: 1,right: "15%",display:"block"}, 3000, function() {$(this).css({display:'block'});});}
    if($('.bloc3').hasClass('animated')){$('.img3').animate({delay: 500,opacity: 1,right: "73%",display:"block",background: "black"}, 3000, function() {$(this).css({display:'block'});$(document).unbind('scroll');});}
});

/**********************************************************************************************************************************************************************************/


































//****************************************************************separation h3 getInTouch avec un h4 pour la description  **********************************************************/
$('.get_in_touch h3').text("ONPC");
$('.get_in_touch h3').after("<h4>Bureau d’étude du BTP</h4>");
$(".get_in_touch h4 ").css({'color': 'white!important','text-align': 'left'});
/*********************************************************************************************************************************************************************************/


































//*************************************************************** AJOUT Title SUR Bouton du menu principal ***************************************************************************/
$("#menu-item-245").attr('title','OPC');
$("#menu-item-244").attr('title','CSPS');
/*********************************************************************************************************************************************************************************/



















********************************************************************** Animation colonne si visible à l écran *********************************************************************
//
var sH;
var $w = $(window);
var d1 = $('.detect1');
var d2 = $('.detect2');
var d3 = $('.detect3');
var d4 = $('.detect4');
//Anim deco h2 
sH = $w.scroll( function () {
     console.log('scroll event');
    if( d1.hasClass('wpb_start_animation animated')){animT(d1); }
    if( d2.hasClass('wpb_start_animation animated')){animT(d2); }
    if( d3.hasClass('wpb_start_animation animated')){animT(d3); }
    if( d4.hasClass('wpb_start_animation animated')){animT(d4); }
});
function  animT (elem){
    elem.find('.decoLeft').animate({width: '230px'},1500,'easeOutCubic',function () { elem.addClass('end');console.log('end class added !!!');  });
    elem.find('.decoRight').animate({width: '230px'},1500,'easeOutCubic',function () { elem.addClass('end');console.log('end class added !!!');  });
}

function loadScript(url, callback){var head = document.getElementsByTagName('head')[0];var script=document.createElement('script');script.type = 'text/javascript';script.src = url;script.onreadystatechange = callback;script.onload =callback;head.appendChild(script);}
loadScript("https://cdnjs.cloudflare.com/ajax/libs/jquery-easing/1.4.1/jquery.easing.min.js", sH);

/***
CSS : 
.decoLeft{ left: 0;}.decoRight{right: 0;}
.decoLeft,.decoRight {position: absolute;width: 0;top: 50%;transform: translateY(-50%);border-top: dashed 5px #B3C6F4;border-bottom: dashed 5px #B3C6F4;z-index: 2;}
***/

/****************************************************************************************** END ANIM SCREEN DETECT **************************************************************************/
















********************************************************************************** Paralax element *******************************************************************************
var tof = $('.photo2');
tof.css({"transform":"translateY(0px)"});


$(window).scroll(function(){
var hScroll = $(this).scrollTop()*.55;
console.log(hScroll);
tof.css("transform","translateY(-"+hScroll+"px)"); 
});
/******************************************** END PARALLAX *********************************************************************************************************************/












********************************************** Parallax mouse multi-image  ****************************************************************************************

$('#Parallax').mousemove(
		function(e){
			/* Zone de calcule des mouvements depuis l'id Parallax */
			var offset = $(this).offset();
			var xPos = e.pageX - offset.left;
			var yPos = e.pageY - offset.top;

			/* Get percentage positions */
			var mouseXPercent = Math.round(xPos / $(this).width() * 100);
			var mouseYPercent = Math.round(yPos / $(this).height() * 100);

			/* Position des enfant ayant la class imgBg */
			$(this).children('.imgBg').each(
				function(){
					var diffX = $('#Parallax').width() - $(this).width();
					var diffY = $('#Parallax').height() - $(this).height();

					var myX = diffX * (mouseXPercent / 100); //) / 100) / 2;
					var myY = diffY * (mouseYPercent / 100);
					var cssObj = {
						'left': myX + 'px',
						'top': myY + 'px'
					};
					//$(this).css(cssObj);
					$(this).animate({left: myX, top: myY},{duration: 50, queue: false, easing: 'linear'});

				}
			);

		}
	);
/**************************************************************************************************************************************************************/












/******************************************************************** PARALLAX MULTI ELEMENTS *********************************************************************************/
var b1 = $('.box1 > .vc_column-inner ');
var b2 = $('.box2  > .vc_column-inner');
var b3 = $('.box3  > .vc_column-inner');
var tabBox = [$('.box1 > .vc_column-inner'),$('.box2 > .vc_column-inner'),$('.box3 > .vc_column-inner')];

var hScroll1;
var hScroll2;
var hScroll3;

b1.css({'top': '878px','left': '-20px'});
b2.css({'top': '980px','left': '80px'});
b3.css({'top': '900px'});

for (var i = 0; i < tabBox.length; i++) {
  var num=i+1;
  tabBox[i].css({"transform":"translateY(0px)"});
  console.log(tabBox[i].val());
}
$(window).scroll(function(){
    hScroll1 = $(this).scrollTop()*1.15;
    hScroll2 = $(this).scrollTop()*1.1;
    hScroll3 = $(this).scrollTop()*1.3;
    
    console.log('param scroll 1 >>'+hScroll1+' | param scroll 2 >>'+hScroll2 + 'param scroll 3 >>'+hScroll3);
    $('.box1 > .vc_column-inner').css("transform","translateY(-"+hScroll1+"px) rotate(5deg)"); 
    $('.box2 > .vc_column-inner').css("transform","translateY(-"+hScroll2+"px) rotate(-5deg)"); 
    $('.box3 > .vc_column-inner').css("transform","translateY(-"+hScroll3+"px) rotate(15deg)"); 
});
/********************************************************************************** END PARALLAX MULTI ELEMENTS ********************************************************************/



























*** ************************************************************Ajout de champs dans le module get_in_touch conteneur contact ***************************************************
var viss;
var $h3;
var i = 0;

$('.get_in_touch').each(function(){
    i++;
    viss = $(this);
    viss.addClass('git' +i);
    $h3 = viss.find('h3') ;
    
    viss.find('h3').replaceWith("<span class='myH3 green1'>"+$(this).find('h3').text()+"</span>");
    viss.find('ul:first-child').before('<ul class="imageUl"><img src="" class="img-wrapper" /></ul>');
    viss.find('.imageUl').before('<span class="desc-wrapper"></span>');
});
$('.git1 .imageUl img').attr('src','/wp-content/uploads/sites/2831/2017/02/logo-bardage-1.png');
$('.git1 .desc-wrapper').html('Couverture, Bardage, Charpente, Menuiserie');
$('.git2 .imageUl img').attr('src','/wp-content/uploads/sites/2831/2017/02/logo-etancheite-1.png');
$('.git2 .desc-wrapper').html('Étanchéité, Zinguerie, Toit-terrasse');
/************************************************************************************************************************************************************************************/


























********************************* Suppression des h4 de FlatBox par des span formatés avec la classe titleFlatBox **************
$('.desc_wrapper').each(function() {
     var h4 = $(this).find('h4');
     h4.replaceWith('<span class="titleFlatBox blue1">' + h4.text() + '</span>');
});
/*******************************************************************************************************************************/

























**************************************************** Gestion du module Actualités ***************************************************
if(location.pathname === "/actualites/"){
    console.log('page Actu visité !!!');
    jQuery("#Wrapper").find('h2').filter(":empty").remove();// suppression de h2 si celui-ci est vide (generé par actualité)
    $('.event-link a').text('En savoir plus');// Modification du bouton en francais

}
/*************************************************************************************************************************************/
























//****************************************LANCEMENT Fonction en fonction de  $(window).width() *******************************************************//
var $w = $(window);
var resizeHandler = $w.resize( function () {
console.log( $w.width() );// Sortie en console de notre position en scrollTop
  // Si la fenêtre est plus grande que 1260px et inferieure à 1560px alors ...
  if ($w.width() > 1260 &&  $w.width() < 1560){       
      console.log("condition remplis");
      $w.off("resize", resizeHandler );// On arrête l'écoute du window.resize
        lancementFonction (); 
      }
	});
	lancementFonction (){
			console.log("fonction lancé et condition remplis");
	} 
/*******************************************************************************************************************************************/






























//************************************** GESTION Du bouton MEDIA GRID photos (10 visible >> nth-child(9)) *****************************/
var inter = setInterval(function(){
    console.log("interval");
    if( $('.vc_pageable-slide-wrapper .vc_grid-item:nth-child(9)').hasClass('animated') ){
        $('.vc_pageable-load-more-btn ').find('.vc_btn3-container').addClass('myBtn');
        $('.vc_pageable-load-more-btn ').find('a').text("charger plus d'image");
        console.log($('.vc_grid-btn-load_more a').text());  
        clearInterval(inter);
    }
},500);




/*** Meilleure Methode ++ */

/****** GESTION Du bouton MEDIA GRID photos (10 visible >> nth-child(9)) **/
if(location.pathname === "/realisations/" || location.pathname === "/photos/" ){
    var refreshIntervalId = setInterval(btnChange, 500);
}


function btnChange (){
        console.log("interval");
        if( $('.vc_pageable-slide-wrapper .vc_grid-item:nth-child(9)').hasClass('animated') ){
            $('.vc_pageable-load-more-btn ').find('.vc_btn3-container').addClass('myBtn');
            $('.vc_pageable-load-more-btn ').find('a').text("charger plus d'image");
            console.log($('.vc_grid-btn-load_more a').text());  
            clearInterval(refreshIntervalId);
        }
    }
/***************************************************************************************************************************************/
























//************************************** Multi Media_Grid tooltip and translate button *****************************/

var btnMore;
var altImg;
var altImgString;
var to ;
if (location.pathname === "/realisations/" || location.pathname === "/photos/") {
    var intervalId = setInterval(btnChange1, 1000);
    function btnChange1() {
        $('.vc_grid-container-wrapper').each(function(i){
            console.log('id media grid '+'1er each >> '+ $(this).attr('id'));
            if( $(this).find('.vc_visible-item').last().hasClass('animated')){
                console.log('Media Grid n° >> ' +(i+1) +' ,nombre element à traiter >>' + $(this).find('.vc_grid-item-mini').length);
                btnMore = $(this).find('.vc_grid-btn-load_more');
                btnMore.addClass('myBtn');
                btnMore.find('a').text("charger plus d'image");
                clearInterval(intervalId);
                to = setTimeout( applyTooltip($(this)), 2000);
            }
        });
    }
    
    //var to = setTimeout(applyTooltip($('#MediaG1')), 2000);
    function applyTooltip(elem) { 
        console.log('elem grid each >> '+ elem.attr('id'));
        altImg = elem.find('img').attr('alt');
        console.log('avant : alt img >> ' +altImg);
        elem.find('.vc_grid-item-mini').each(function(e) {
            console.log( 'verif elem min grid >> ' + $(this).attr('class') );
            if( $(this).find('a').attr('title') !== '' ||  $(this).find('a').attr('title') !== undefined ){
                altImgString =  $(this).find('a').attr('title').replace(/-/g, " ") ;
                $(this).find('img').attr( 'alt',altImgString );
                console.log('via title a : alt img >> ' + altImgString);
            }
            if( $(this).find('img').attr('title') !== '' ||  $(this).find('img').attr('title') !== undefined ){
                altImgString =  $(this).find('a').attr('title').replace(/-/g, " ");
                $(this).find('img').attr( 'alt',altImgString);
                console.log('via title img : alt img >> ' + altImgString);
            }
            if( $(this).find('img').attr('alt') !== '' ||  $(this).find('img').attr('alt') !== undefined ){
                altImgString = $(this).find('img').attr('alt').replace(/-/g, " ");
                console.log('via alt img : alt img >> ' + altImgString);
            }
            $(this).find('a').removeAttr('title');
            $(this).find('img').attr('alt',altImgString);
            $(this).find('.vc_gitem-animated-block ').after('<div class="myTooltip">' + altImgString + '</div>');
        });
     
        $('.myTooltip').css({
            background: 'rgba(0, 0, 0, 0.5)',
            height: '30px',
            width: '100%',
            position: 'absolute',
            left: '0',
            bottom: '-30px',
            color: 'white',
            'line-height': '30px',
            'text-align': 'center',
            opacity: '1',
            transition: 'all .6s'
        });
         $('.vc_grid-item .vc_grid-item-mini.vc_is-hover:hover .myTooltip').css('bottom', '0!important');// placer le css dans la page si le hover pose problème
         $('.vc_grid-item').css({'padding': '0', 'overflow':'hidden'});
    }
}





















************************************************************* Smooth Scroll amélioré *************************************************
/* SMOOTH SCROLL */
$('a[href*="#"]:not([href="#"])').click(function() {
  if (location.pathname.replace(/^\//,'') == this.pathname.replace(/^\//,'') && location.hostname == this.hostname) {
    var target = $(this.hash);
    target = target.length ? target : $('[name=' + this.hash.slice(1) +']');
    if (target.length) {
      $('html, body').animate({
        scrollTop: target.offset().top-60
      }, 1000);
      return false;
    }
  }
}); 
/*****************************************************************************************************************************************/




























***************************** Animation slideDown avec easing complet et screen detect de l élément à l écran **********************************************************************************
$('.blocPart .p1,.blocPart .p2,.blocPart .p3').slideUp(10);
$('.blocPart').addClass('wpb_animate_when_almost_visible ');


// Fonction permettant de charger une classe externe et de l'utiliser dans une fonction
//  class fonctionnelle >> dans hook <script type='text/javascript' src="https://cdnjs.cloudflare.com/ajax/libs/jquery-easing/1.4.1/jquery.easing.min.js"> 
function loadScript(url, callback){
	var head = document.getElementsByTagName('head')[0];var script=document.createElement('script');script.type = 'text/javascript';script.src = url;script.onreadystatechange = callback;script.onload = callback;head.appendChild(script);}
loadScript("https://cdnjs.cloudflare.com/ajax/libs/jquery-easing/1.4.1/jquery.easing.min.js", startListenScroll);
function startListenScroll () {$(document).on("scroll", detectWAV);}


function detectWAV(){
     if($('.blocPart').hasClass('wpb_start_animation')){
        console.log('detect item for animation');
        $('.blocPart').slideDown(10,"linear");
        $('.blocPart .p1').slideDown({duration: 300,easing: "easeOutBack"});
        $('.blocPart .p2').slideDown({duration: 600,easing: "easeOutBack"});
        $('.blocPart .p3').slideDown({duration: 900,easing: "easeOutBack"});
        
        $('.blocPart').removeClass('wpb_animate_when_almost_visible ');
        console.log('when_almost_visible is detected >> ' + $('.blocPart').hasClass('wpb_animate_when_almost_visible '));
       $(document).off("scroll", detectWAV);
    }
}
/****************************************************************************************************************************************************************************************************/














************************************************************************************************* Picto rotation viewer *********************************************************************************
var img, imgSrc, urlImg, tween, imgOut,imgOver;
$('.icoHover figure').each(function(){ 
     $(this).children().css({pointerEvents:'none'});
});
   
$('.icoHover figure').hover(
    function(){
        img = $(this).find('img');
        imgSrc =  img.attr('src');
        urlImg = imgSrc.substring(0, imgSrc.length-4);
        imgOut = urlImg+'.jpg';
        imgOver = urlImg+'-hover.jpg';
        if(imgOver.substring(imgOver.length,imgOver.length- 16) === '-hover-hover.jpg'){ imgOver = imgOver.substring(0,imgOver.length- 16) + '-hover.jpg';}
        if(imgOut.substring(imgOver.length,imgOver.length- 10) === '-hover.jpg'){ imgOver = imgOver.substring(0,imgOver.length- 10) + '.jpg';}
        tween = TweenLite.to(img, 0.2, {rotationY:90, transformOrigin:"50% 50%", onComplete:function(){img.attr('src',imgOver);TweenLite.to(img, 0.2, {rotationY:180, transformOrigin:"50% 50%"});}});
    },// Out
        function(){TweenLite.to(img, 0.2, {rotationY:90, transformOrigin:"50% 50%", onComplete:function(){img.attr('src',imgOut);TweenLite.to(img, 0.2, {rotationY:0, transformOrigin:"50% 50%"});}});
    }
);
/****************************************************************************************************************** END Picto Rotation viewer *************************************************************/























************************************************************************** Del admin plus précis, avec utilisation de addStyle **********************************************************
if($('body').hasClass('admin-bar')){
    $('body').addClass('replaceTopBody');
    if($('#Top_bar').css('top')=== '32px'){console.log('top === 32');addStyles('#Header #Top_bar',{top : '0!important'});}
    console.log('admin bar détécté !!!');
    if($(window).width() < 782){console.log('mobile');addStyles('body', {top: '-46px!important',position: 'relative'});}
    else if($(window).width() > 782){console.log('desktop');addStyles('body', {top: '-32px!important',position: 'relative'});}
    $('#wpadminbar').remove();
}

/* Gestion creation suppression de css sur objet********************************************** */
function addStyle(selector, rulename, value) {
    var stylesheet = getAppStylesheet();
    var cssRules = stylesheet.cssRules || stylesheet.rules;
    var rule = stylesheet.insertRule(selector + ' { ' + rulename + ':' + value + ';}', cssRules.length);
}
function clearStyle(selector, rulename) {
    var stylesheet = getAppStylesheet();
    var cssRules = stylesheet.cssRules || stylesheet.rules;
    for (var i=0; i<cssRules.length; i++) {
        var rule = cssRules[i];
        if (rule.selectorText == selector && rule.style[0] == rulename) {
            stylesheet.deleteRule(i);
            break;
        }
    }       
}

function addStyles(selector, rules) {
    var stylesheet = getAppStylesheet();
    var cssRules = stylesheet.cssRules || stylesheet.rules;
    for (var prop in rules) {
        addStyle(selector, prop, rules[prop]);
    }
}

function getAppStylesheet() {
    var stylesheet = document.getElementById('my-styles');
    if (!stylesheet) {
        stylesheet = $('<style id="my-styles">').appendTo('head')[0];
    }
    stylesheet = stylesheet.sheet;
    return stylesheet;
}
/******************************************************************************************************************************************************************************************************/






















************************************************ Changer le type de lien sous-menu ancre en curent-item si la position est == à l id  ********************************************
var position = $('#actualites').offset(); 
$(document).scroll(function () {
    var y = $(this).scrollTop();
    if(y >= position.top -300){
        console.log("actualité visité");
        $('#menu-item-369').addClass('current-menu-item');
    }else{
        console.log("actualité non visité");
        $('#menu-item-369').removeClass('current-menu-item');
    }
});
/*************************************************************************************************************************************************************************************************/
























************************************************************* EFEETS BOUTON ************************************************************************************************************
// rendre un lien ouvrable dans un nouvel onglet
$('#menu-item-180 a').attr('target','_blank');


// Desactiver bouton (comme menu de sous-menu )
$('#id-bouton-menu').prop(disabled, true);


// Cacher un élément avec animation
$('.btn1').hover(function() {
        $('.bloc1').slideUp(5000, "easeInQuart");
      },
      function(){
        $('.bloc1').slideOut(5000, "easeOutQuart");
      }
   );

// >>>>>>>>>>>  Liste easing : http://easings.net/fr
/*************************************************************************************************************************************************************************************/




























******************************************************** ajouter une animation et remplacement de texte avec TweenMax****************************************************************
var styleTitleFb = {
    position: 'relative',
    color: '#961e1a',
    paddingRight: '20px',
    fontWeight: '600',
    lineHeight: "55px"
};

$('.social .facebook .icon-facebook').before('<span class="descfb">Rejoignez-nous ! </span>');
var descFB = $(".descfb");
descFB.css(styleTitleFb);


var saveTxt = $('.social .facebook a').text();
$('.social .facebook a').hover(function() {
    $(this).css('text-decoration','none');
    var newText = "sur notre page facebook !";
    TweenMax.to(descFB, 0.3, {left:'100%', opacity:0, ease:Linear.easeNone, onComplete: step2});    
    function step2 (){
        console.log('1');
        descFB.text("sur notre page facebook !");
        console.log('2');
        TweenMax.to(descFB, 0.2, {left:0,opacity:1, ease:Linear.easeNone});
        console.log('3');
    }
}, function() {
    TweenMax.to(descFB, 0.3, {left:'100%',opacity:0, ease:Linear.easeNone, onComplete: step3}); 
    function step3 (){
        descFB.text('Rejoignez-nous !');
        TweenMax.to(descFB, 0.2, {left:0, opacity:1,ease:Linear.easeNone});
    }
});
//******************************************************************************** Fin ***************************************************************************************


























********************************************************recherche et remplace texte dans une page (mentions légales)****************************************************************
$('.page-id-132 .vc_custom_1435138638284 span').each(function() {
    var text = $(this).text();
    $(this).text(text.replace('MATH PREVARIS', 'MATH-PREVARIS')); 
}); 
//******************************************************************************** Fin modification h1***************************************************************************************











***********************************************************************Remplacement de copyright pj**************************************************************************************
$('.pj-shortcode').each(function() {
    var text = $(this).text();
    console.log(text);
    $(this).text(text.replace('Gelmatic France', 'CS-CONCEPT')); 
});  

$('.pj-shortcode').after("<a class afterCopyright'>mon new texte</a>");
//******************************************************************************** Fin modification h1***************************************************************************************











*************************************************************************** paramètrage des attributs du logo *************************************************************************
$('#logo[title]').removeAttr('title');// Suppression Title
$('#logo').find('img').attr('alt','alt du logo');// Ajout de l'attribut alt
//******************************************************************************** Fin modification h1***************************************************************************************









********************************************************* Ajout des agences dans le slogan et avant chaque numéro de téléphone*************************************************************
$('.contact_details li:nth-child(2)').prepend( '| Site Bergerac ' );
$('.contact_details li:nth-child(3)').prepend( ' Site Marsac : ' );
//******************************************************************************** Fin modification h1***************************************************************************************







***************************************************************Suppression d un h3 invisible généré par les formulaire d avis***************************************************************
var h3Avis = $(".comment-respond").find("h3")
h3Avis.replaceWith("<span>"+h3Avis.text()+"</span>")
//******************************************************************************** Fin modification h1***************************************************************************************














********************************************************gestion du retour de ligne du h1 de la page d accueil pour ajouter un saut de ligne *************************************************
var titleAccueil = $(".cutH1");
var newtitleAccueil="Christophe levage manutention <br /> Caen / La Haye-du-Puits";
titleAccueil.html(newtitleAccueil);
//******************************************************************************** Fin modification h1***************************************************************************************
















******************************************************** Modification retour à la ligne h1 avec detection de page target ********************************************************
//gestion du retour de ligne du h1 de la page d'accueil pour ajouter un saut de ligne après la virgule

  if(location.pathname === "/"){
       var titleAccueil = $(".title");
      var textTitle = titleAccueil.text();
      var ancienTextAccueil = "Piscines Magiline Water-Ric, maître d'oeuvre des piscines en Dordogne";
      var newtitleAccueil="Piscines Magiline Water-Ric,<br /> maître d'oeuvre des piscines en Dordogne";
}
     
  function modifieH1(){
     if($(window).width() < 1600){
         if(textTitle === ancienTextAccueil ){ titleAccueil.html(newtitleAccueil);}
         modifieH1.off();
        }else{
             if(textTitle == newtitleAccueil){ titleAccueil.html(newtitleAccueil);}
              titleAccueil.html(ancienTextAccueil );
        }
  }
  modifieH1();
  $( window ).resize(function() {
	console.log( "taille fenetre >> "+$(window).width() );
    modifieH1(); 
  });
  //------------------------------ Fin modification h1------------------------------------------------



















******************************************************** Fonction permettant de créer une animation de défilement vers une ancre ************************************************
$('a[href^="#"]').click(function(){
var the_id = $(this).attr("href");
  console.log(the_id);
//verification de l'id si true >> activation scrollTop
  if(the_id === '#nos-programmes'){
  	$('html, body').animate({
  		scrollTop:($(the_id).offset().top -50)
  	}, 'slow');
  	return false;
  }
});
/**********************************************************************************************************************************************************************************/



















********************************************************Remplacement de h2 du TS image overlay par un h3 ********************************************************
  $('.mask').each(function() {
     var h2Overlay = $(this).find('h2');
     h2Overlay.replaceWith('<h3>' + h2Overlay.text() + '</h3>');
    var titleH3 =  $(this).children();
     titleH3.css("cssText", "color: #ffffff!important;");
     console.log('h2Overlay >> '+h2Overlay+',       this.children() >>'+$(this).children().attr('class') );
  });
/***************************************************************************** END REPLACE H2 ******************************************************************/











********************************************************Suppression d un h3 invisible généré par les formulaire d avis *****************************************
var h3Avis = $(".comment-respond").find("h3")
h3Avis.replaceWith("<span>"+h3Avis.text()+"</span>");
/**********************************************************************************************************************************************************************************/











***************************************************gestion du retour de ligne du h1 de la page d accueil pour ajouter un saut de ligne après la virgule************************************
  if(location.pathname === "/"){
       var titleAccueil = $(".title");
      var textTitle = titleAccueil.text();
      var ancienTextAccueil = "Piscines Magiline Water-Ric, maître d'oeuvre des piscines en Dordogne";
      var newtitleAccueil="Piscines Magiline Water-Ric,<br /> maître d'oeuvre des piscines en Dordogne";
}
     
  function modifieH1(){
     if($(window).width() < 1600){
         if(textTitle == ancienTextAccueil ){ titleAccueil.html(newtitleAccueil);}
        }else{
             if(textTitle == newtitleAccueil){ titleAccueil.html(newtitleAccueil);}
              titleAccueil.html(ancienTextAccueil );
        }
  }
  modifieH1();
  $( window ).resize(function() {
console.log( "taille fenetre >> "+$(window).width() );
    modifieH1(); 
  });
/**********************************************************************************************************************************************************************************/








  


*****************************Fonction permettant de créer une animation de défilement vers une ancre : la fonction détecte et applique automatiquement l animation sur les liens ***********
  $('a[href^="#"]').click(function(){
  	var the_id = $(this).attr("href");
  
  	$('html, body').animate({
  		scrollTop:($(the_id).offset().top -50)
  	}, 'slow');
  	return false;
  });
/********************************************************************************************** FIN SMOOTH ANIM CLICK BTN *************************************************************************/











*************************************************************************** remplacement de h2 du TS image overlay par un h3 ***************************************************************
$('.mask').each(function() {
     var h2Overlay = $(this).find('h2');
     h2Overlay.replaceWith('<h3>' + h2Overlay.text() + '</h3>');
    var titleH3 =  $(this).children();
     titleH3.css("cssText", "color: #ffffff!important;");
     console.log('h2Overlay >> '+h2Overlay+',       this.children() >>'+$(this).children().attr('class') );
});
/********************************************************************************************** FIN SMOOTH ANIM CLICK BTN *************************************************************************/










*************************************************************************Remplacement h3 de la page contact ********************************************************************************
if(location.pathname === "/contact"){
    var h3Contact= $(".get_in_touch").find('h3');
    var txtH3Contact = h3Contact.text();
    h3Contact.remove();
    // h3Contact.replaceWith("<span>"+txtH3Contact+"</span>")
}
/********************************************************************************************** FIN SMOOTH ANIM CLICK BTN *************************************************************************/












************************************************************** Fonction permettant de charger une classe externe et de l utiliser dans une fonction  ******************************************
function loadScript(url, callback)
{
    // Adding the script tag to the head as suggested before
    var head = document.getElementsByTagName('head')[0];
    var script = document.createElement('script');
    script.type = 'text/javascript';
    script.src = url;

    // Then bind the event to the callback function.
    // There are several events for cross browser compatibility.
    script.onreadystatechange = callback;
    script.onload = callback;

    // Fire the loading
    head.appendChild(script);
}
loadScript("https://raw.githubusercontent.com/zaach/reflect.js/master/standalone/reflect.js", reflectImg);
var reflectImg = function() {

   // Here, do what ever you want
};


// Autre méthode d'importation de framework et d'utilisation localisé
// Ajout d'une blibliothèque jquery transmit et utilisation de celle-ci dans la zone getScript{}
    var url = "https://cdn.jsdelivr.net/jquery.transit/0.9.12/jquery.transit.min.js";
    $.getScript( url, function() {

});
/********************************************************************************************** END LOAD CLASS *************************************************************************/











************************************************************************************* Clone css *********************************************************************************************
// Fonction de copie CSS, possibilité de save l'ensemble des propriétés style et de les réappliquer par la suite à une autre classe    
function css(a) {
    var sheets = document.styleSheets, o = {};
    for (var i in sheets) {
        var rules = sheets[i].rules || sheets[i].cssRules;
        for (var r in rules) {
            if (a.is(rules[r].selectorText)) {
                o = $.extend(o, css2json(rules[r].style), css2json(a.attr('style')));
            }
        }
    }
    return o;
}

function css2json(css) {
    var s = {};
    if (!css) return s;
    if (css instanceof CSSStyleDeclaration) {
        for (var i in css) {
            if ((css[i]).toLowerCase) {
                s[(css[i]).toLowerCase()] = (css[css[i]]);
            }
        }
    } else if (typeof css == "string") {
        css = css.split("; ");
        for (var i in css) {
            var l = css[i].split(": ");
            s[l[0].toLowerCase()] = (l[1]);
        }
    }
    return s;
}

//--------------------------- Utilisation >>
$('.get_in_touch').find(".spanH3").css(style);
/**********************************************************************************************************************************************************************************/













****************************************************************************** Lancement fonction dans une partie spécifique du site via scrollTop *****************************************
var $window = $(window);
var affiche = false;
var scrollHandler = $window.scroll( function () {
console.log( $window.scrollTop() );// Sortie en console de notre position en scrollTop
	
        // Si nous somme dans la zone des pictos et si les icones ne sont pas affichés
        if ($window.scrollTop() > 1260 && !affiche && $window.scrollTop() < 1560){       
                 console.log("condition remplis");
                $(window).off("scroll", scrollHandler );// On arrête l'écoute du window.scroll
                lancementFonction (); 
          }
	});
/**********************************************************************************************************************************************************************************/














**************************************** Vider un input au clic et replacer le texte de base hors focus **************************************************************************
<input style="width:100%;height:33px;padding:0!important;font-size:13px!important;height:33px;background-color:#fff"type="text" value="Vannes, 56000, mon agence..." onfocus="if (this.value == 'Vannes, 56000, mon agence...') {this.value = '';}" onblur="if (this.value == '') {this.value = 'Vannes, 56000, mon agence...';}">

/**********************************************************************************************************************************************************************************/











********************************************************Recherche le premier caractère d un href qui commence par '' et le supprimer *********************************************
var str="";
$("a").each(function(){
     str= $(this).attr('href');
    if(str.indexOf("'") > -1){
        var fin = $(this).attr('href').substring(1, str.length);
        $(this).attr('href',fin);
         return false; 
    }
});
/**********************************************************************************************************************************************************************************/











*************************************************************** Technique remplacement des titres H par span stylisé ********************************************************************
$('.how_it_works').each(function() {
     var h4 = $(this).find('h4');
     h4.replaceWith('<span class="myH4">' + h4.text() + '</span>');
     console.log('h4'+h4.text);
  });


var h3Info = $('.infobox h3');
 h3Info.replaceWith('<span class="myH3">'+ h3Info.text()+'</span>');

 if(location.pathname === "/"){
	  $('h3').replaceWith('<span style="color: #fff!important;font-size:25px">'+ $(this).text()+'</span>');
  }

/**********************************************************************************************************************************************************************************/










************************************************************* Gestion logo Top_bar *****************************************************************************
$('.logo a').attr('alt','Mutualia Alliance Santé');
$('.logo a').removeAttr('title');
$('.logo a img').attr('alt', 'Logo Mutualia Alliance Santé');
/**********************************************************************************************************************************************************************************/






***************************************************************Gestion du zoom de la map de la page contact********************************************************/
$('.map_canvas1').addClass('scrolloff'); // le style css scrolloff est lié à map_canvas
 $('.canvas1').on('click', function () {
	$('.map_canvas1').removeClass('scrolloff'); // au clic le style est supprimé
});
$(".map_canvas1").mouseleave(function () {
	$('.map_canvas1').addClass('scrolloff'); // au mouse leave la classe scrollof est liée
});
/**********************************************************************************************************************************************************************************/






******************************************Fonction permettan de remettre les texte justifié en alignement left sur mobile*************************************************
$('p').each(function() {
    if($(window).width() < 768 && $('p').css({'text-align' : 'justify'}) ){
        console.log('paragraphe justifié');
        $('p').css({'text-align' : 'left'});
    }
});
/**********************************************************************************************************************************************************************************/









********************************************Scroll clic via ancre avec recupération de l id et nettoyage de l url**************************************************************
$("footer a").click(function(e) {
		e.preventDefault();
		
		// Isole l'ancre id
		var idTab = $(this).attr("href");
		var n=idTab.indexOf("#");
		var m=idTab.substring(n);
		
		//Tests du lien
		//pour agir sur le scrolling		
		if(m === "#top"){
			var target = this.hash,
			$target = $(target);

			$('html, body').stop().animate({
				'scrollTop': $target.offset().top
			}, 900, 'swing', function () {
				window.location.hash = target;
			});
		}
});
/**********************************************************************************************************************************************************************************/






********************************************************** RATIO IMAGE ****************************************************************************************
 function objectResize(obj, baseWidth, baseHeight, originalWidth, originalHeight )
        {
            var imageRatio,
                originalWidth,
                originalHeight,
                newImgWidth,
                newImgHeight,
                newImgTop,
                newImgLeft;
    
            imageRatio = originalHeight/originalWidth;
            containerRatio = baseHeight/baseWidth;
    
            if(containerRatio > imageRatio){
                newImgHeight = baseHeight;
                newImgWidth = Math.round( (newImgHeight*originalWidth) / originalHeight );   
            }else{
                newImgWidth = baseWidth;
                newImgHeight = Math.round( (newImgWidth*originalHeight) / originalWidth );
            }
    
            newImgLeft=-(newImgWidth-baseWidth)*.5;
            newImgTop= -(newImgHeight-baseHeight)*.5;
            
            obj.css({width: newImgWidth, height: newImgHeight, marginTop: newImgTop, marginLeft: newImgLeft});
        }
/**********************************************************************************************************************************************************************************/









************************************************************************   GESTION LANCEMENT VIDEO IFRAME ***********************************************************************
$(document).ready(function() {
    $('#play-video').on('click', function(ev) {
        $("#video")[0].src += "&autoplay=1";
        ev.preventDefault();

    });
});


/********************************************** Lecture d'une video *************************************************************/
$('#videoId').get(0).play();

au click
jQuery( document ).ready(function($) {
    $('.myHTMLvideo').click(function() {
        this.paused ? this.play() : this.pause();
    });
});

$("video").each(function(){
    $(this).get(0).pause();
});

$('video').click(function(){
    this[this.paused ? 'play' : 'pause']();
});
/**********************************************************************************************************************************************************************************/









************************************************************** Controler slider revolution ***************************************************
// revapi + id du slider (dans all slider)
var left; 
var right; 
var totalSlides;
 
// function to fire once the slider has fully loaded
revapi4.on('revolution.slide.onloaded', function() {
    
    // read in the total number of slides
    totalSlides = revapi4.revmaxslide();
    
    // grab the left arrow
    left = jQuery('.tp-leftarrow');
    
    // grab the right arrow
    right = jQuery('.tp-rightarrow');
	revapi4.revnext();
});




// Controle video
$('#rev_slider_3_1_wrapper').on('revolution.slide.onvideostop', function(event, data) {
 
    console.log(data.video);// = The Video API to Manage Video functions
    console.log(data.videotype);// = youtube, vimeo, html5
    console.log(data.settings);// = Video Settings
 
    switch(data.videotype) {
        case 'youtube':
             console.log(data.video);// = YouTube iframe API reference:
        break;
        case 'vimeo':
             console.log(data.video);// Vimeo iframe API reference
        break;
        case 'html5':
            console.log(data.video);// = HTML Video element:
        break;
    }
});
/**********************************************************************************************************************************************************************************/




***********************************************************************Cacher admin-bar  et replacer body*****************************************************************************
if($('body').hasClass('admin-bar')){
     //$("<style type='text/css'> .replaceTopBody{  position:relative!important; top:-32px;} </style>");
     $('body').addClass('replaceTopBody');
     $('#wpadminbar').remove();
}
/************************************************************************************************************************************************************************************/



************************************************************************* DIVERS ******************************************************************************************

//fonction _blank utilisé dans les composants boutons onclick après avoir coché "Advanced on click action
window.open('http://www.atp-pesage.fr/balances_analyse/index.php', '_blank')


$('.searchAgence').click(
    function(){
        $(this).val('');
    });
$('.pj-shortcode').text('Mutualia alliance santé');


// Test pour admin bar
/*
var $w= $(window);
$('#Wrapper').css({'position': 'relative!important','top':'-32px!important'});
$('html').css({'margin': '0!important'});
console.log($('html').text());
$('#wpadminbar').css({'display': 'none!important'});
$('#wpadminbar').fadeOut();
$('.admin-bar').css({'position': 'relative','top': '-32px!important'});
$('.js_active').css({'margin': '0!important'});
/**
 * @param [string]  [styleName] [filename with suffix e.g. "style.css"]
 * @param [boolean] [disabled]  [true disables style]
 *
var disableStyle = function(styleName, disabled) {
    var styles = document.styleSheets;
    var href = "";
    for (var i = 0; i < styles.length; i++) {
        href = styles[i].href.split("/");
        href = href[href.length - 1];

        if (href === styleName) {
            styles[i].disabled = disabled;
            break;
        }
    }
};
document.getElementById("admin-bar-css").disabled = true;
document.getElementById("pj-toolbar-pages-css").disabled = true;
document.getElementById("mfn-dnmc-style-css").disabled = true;
var style = $('html').prop('style');
style.marginTop = 0;
console.log('mt : ' + style.marginTop);
$('.vc_desktop').delay(1000).css({'top':'-32px!important'});
$('html').css({'position':'relative','top':'-32px!important'});
console.log($('html').css('top'));
console.log($('html').css('margin-top'));
$('#wpadminbar').remove();
var _html = document.getElementsByTagName("html")[0];
_html.removeAttribute("style");
$('html body').delay(2000).css('position','relative!important');
$('html body').delay(3000).css('top','-32px!important');
console.log($('html').css('margin-top'));
*/


TEST 2 ADMIN BAR
var screenMob = 782;
var windowsize = $(window).width();
var admH = $('#wpadminbar').height();

// Cacher admin-bar  et replacer body
if($('body').hasClass('admin-bar')){
    console.log('admin bar détécté !!!');
    $('#wpadminbar').remove();
    $('body').addClass('replaceTopBody');
    $('.replaceTopBody').css('top','-'+admH+'px');
    if(windowsize < screenMob){$("<style type='text/css'> .replaceTopBody{position:relative!important; top:-46px!important;}</style>");}
    else  if(windowsize > screenMob){$("<style type='text/css'> .replaceTopBody{position:relative!important; top:-32px!important;}</style>");}
    $('<style type="text/css">.replaceTopBody{position:relative!important; top:-46px!important;}</style>');
}



***** Test mouseScroll page externe vers autre page avec ancre */
var target;
var url      = window.location.href;  
var strUrl = "https://piscines-vaucluse.site-privilege.pagesjaunes.fr";
var jump=function(e){
   if(url === strUrl || url === strUrl+'#accueil'){console.log("page accueil")}else if(url != strUrl){console.log('autre page que accueil')}
     console.log("url complete >>" + url.substr(0, strUrl.length));
    console.log('jump location hach >> ' + location.hash);
   if (e){
       e.preventDefault();
       target = $(this).attr("href");
       console.log('$(this).attr("href") >>' + target);
    }else{
       target = location.hash;
       console.log('target >> ' + target);
    }
   $('html,body').animate({
        scrollTop: $(target).offset().top},2000,function(){
        console.log('location.hash >> ' + location.hash);
        location.hash = target;
   });
};

$('html, body').hide();
$(document).ready(function(){
    $('a[href^=#]').bind("click", jump);
   
    if (location.hash){
        console.log('location hach is true !!!   Locationhach === '+location.hash);
        setTimeout(function(){
            $('html, body').scrollTop(0).show();
            console.log('go jump');
            jump();
        }, 0);
    }else{
        $('html, body').show();
        console.log('show body');
    }
});








var to 
if (location.pathname === "/realisations/" || location.pathname === "/photos/") {
    var intervalId = setInterval(btnChange1, 1000);
    function btnChange1() {
        ('.vc_grid-container-wrapper').each(function(){
            if ($(this).find('.vc_pageable-slide-wrapper .vc_visible-item').last().hasClass('animated')) {
                btnMore = $(this).find('.vc_pageable-load-more-btn').find('.vc_grid-btn-load_more');
                btnMore.addClass('myBtn');
                btnMore.find('a').text("charger plus d'image");
                clearInterval(intervalId);
                to = setTimeout(applyTooltip($(this)), 2000);
            }
        });
    }
    
    //var to = setTimeout(applyTooltip($('#MediaG1')), 2000);
    function applyTooltip(elem) { 
        clearTimeout(applyTooltip);
        console.log('elem grid each >> '+ elem.attr('id'));
        altImg = elem.find('img').attr('alt');
        console.log('avant : alt img >> ' +altImg);
        $(elem.find('.vc_grid-item-mini').each(function(e) {
            console.log( 'verif elem min grid >> ' + $(this).attr('class') );
            if( $(this).find('a').attr('title') !== '' ||  $(this).find('a').attr('title') !== undefined ){
                altImgString =  $(this).find('a').attr('title').replace(/-/g, " ") ;
                $(this).find('img').attr( 'alt',altImgString);
                console.log('via title a : alt img >> ' + altImgString);
            }
            if( $(this).find('img').attr('title') !== '' ||  $(this).find('img').attr('title') !== undefined ){
                altImgString =  $(this).find('a').attr('title').replace(/-/g, " ");
                $(this).find('img').attr( 'alt',altImgString);
                console.log('via title img : alt img >> ' + altImgString);
            }
            if( $(this).find('img').attr('alt') !== '' ||  $(this).find('img').attr('alt') !== undefined ){
                altImgString = $(this).find('img').attr('alt').replace(/-/g, " ");
                console.log('via alt img : alt img >> ' + altImgString);
            }
            $(this).find('a').removeAttr('title');
            $(this).find('img').attr('alt',altImgString);
            $(this).find('.vc_gitem-animated-block').after('<div class="myTooltip">' + altImgString + '</div>');
        });
    }
}

</script>


************************************************************** GREENSOCK ***********************************************************


Les import possibles >>
https://cdnjs.cloudflare.com/ajax/libs/gsap/latest/easing/EasePack.min.js
https://cdnjs.cloudflare.com/ajax/libs/gsap/latest/jquery.gsap.min.js
https://cdnjs.cloudflare.com/ajax/libs/gsap/latest/plugins/AttrPlugin.min.js
https://cdnjs.cloudflare.com/ajax/libs/gsap/latest/plugins/BezierPlugin.min.js
https://cdnjs.cloudflare.com/ajax/libs/gsap/latest/plugins/ColorPropsPlugin.min.js
https://cdnjs.cloudflare.com/ajax/libs/gsap/latest/plugins/CSSPlugin.min.js
https://cdnjs.cloudflare.com/ajax/libs/gsap/latest/plugins/CSSRulePlugin.min.js
https://cdnjs.cloudflare.com/ajax/libs/gsap/latest/plugins/DirectionalRotationPlugin.min.js
https://cdnjs.cloudflare.com/ajax/libs/gsap/latest/plugins/EaselPlugin.min.js
https://cdnjs.cloudflare.com/ajax/libs/gsap/latest/plugins/EndArrayPlugin.min.js
https://cdnjs.cloudflare.com/ajax/libs/gsap/latest/plugins/KineticPlugin.min.js
https://cdnjs.cloudflare.com/ajax/libs/gsap/latest/plugins/RaphaelPlugin.min.js
https://cdnjs.cloudflare.com/ajax/libs/gsap/latest/plugins/RoundPropsPlugin.min.js
https://cdnjs.cloudflare.com/ajax/libs/gsap/latest/plugins/ScrollToPlugin.min.js
https://cdnjs.cloudflare.com/ajax/libs/gsap/latest/plugins/TextPlugin.min.js
https://cdnjs.cloudflare.com/ajax/libs/gsap/latest/TimelineLite.min.js
https://cdnjs.cloudflare.com/ajax/libs/gsap/latest/TimelineMax.min.js
https://cdnjs.cloudflare.com/ajax/libs/gsap/latest/TweenLite.min.js
https://cdnjs.cloudflare.com/ajax/libs/gsap/latest/TweenMax.min.js

<script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/latest/plugins/CSSPlugin.min.js" type="text/javascript" defer=""></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/1.11.5/plugins/CSSRulePlugin.min.js" type="text/javascript" defer=""></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/1.19.0/TweenMax.min.js" type="text/javascript" defer=""></script>








>> TimeLineLite :


myTimeline.add( TweenLite.from(element, 1, {left:100, opacity:0.5}) );
myTimeline.from(element, 1, {left:100, opacity:0.5});


// crée un scénario qui appelle myFunction () quand il termine 
var tl = new TimelineLite({onComplete:myFunction});
         
// Maintenant, nous allons utiliser le chaînage, mais chaque étape sur une ligne différente pour la lisibilité ... 
tl.fromTo(element, 1, {left:0}, {left:-100})            // l'élément tween est à gauche de 0 à -100 . 
  .to(element, 1, {top:50}, "-=0.25")                   // puis tween de l'élément à 50, en le démarrant 0.25 secondes avant la fin de l'interpolation précédente 
  .set(element, {opacity:0})                            // alors positionne element.opacity à 0.5 immédiatement 
  .call(otherFunction)                                  // puis appel à otherFunction ()
  .staggerTo([element1, element2, element3], 1.5, {rotation:45}, 0.25); // interpole finalement la rotation de element1, element2 et element3 sur 45 et décale les temps de départ de 0.25 secondes

::: FROM >>
Ajoute une interpolation TweenLite.from () à la fin de la timeline (ou ailleurs en utilisant le paramètre "position") 
- c est une méthode pratique qui accomplit exactement la même chose que ajouter (TweenLite.from (...)) mais avec moins de code. 

::: .fromTo : *
Ajoute une interpolation TweenLite.fromTo () à la fin de la chronologie 
- c est une méthode pratique qui accomplit exactement la même chose que ajouter (TweenLite.fromTo (...)) mais avec moins de code.


tl.fromTo(element, 1, {left:0}, {left:100});  // ajoute à la fin de la timeline 
tl.fromTo(element, 1, {left:0}, {left:100}, 2);  // l'ajoute à exactement 2 secondes dans la timeline (position absolue) 
tl.fromTo(element, 1, {left:0}, {left:100}, "+=2");  // l'ajoute 2 secondes après la fin (avec un écart de 2 secondes)
tl.fromTo(element, 1, {left:0}, {left:100}, "myLabel");  // le place à "myLabel" (et si "myLabel" n'existe pas encore, il est ajouté à la fin et ensuite l'interpolation y est insérée)
tl.fromTo(element, 1, {left:0}, {left:100}, "myLabel+=2");  // le place 2 secondes après "myLabel"    





:::::::::::::TweenLite filter >>
TweenLite.to(image, 1, {pixi:{colorize:"red", colorizeAmount:1}});
TweenLite.to(image, 1, {pixi:{saturation:0}});
TweenLite.to(image, 1, {pixi:{hue:180}});
TweenLite.to(image, 1, {pixi:{brightness:3}});
TweenLite.to(image, 1, {pixi:{contrast:3}});
TweenLite.to(image, 1, {pixi:{blur:20}});
>>  RESET Filter
TweenLite.to(image, 1, {pixi:{colorMatrixFilter:null, blur:0}});






---------Savoir si la tween est active
if(!tween.isActive()){}

var endX = 300;
var box = $(".box")[0];
var tween = TweenLite.to(box, 2, {x:endX, ease:Linear.easeNone}).reverse();


$("#tweenBox").click(function(){
  if(!tween.isActive()){
    //only reverse the direction if the tween is not active
    tween.reversed(!tween.reversed())
  }
})



----------Progression animation
var progress = myAnimation.progress(); //ecoute de la progression
myAnimation.progress(0.25); //sets progression lorsque le quart de l'animation est lu




-----------Se deplacer a un temps donné de l animation
//jumps to exactly 2 seconds
myAnimation.seek(2);

//jumps to exactly 2 seconds but doesn't suppress events during the initial move:
myAnimation.seek(2, false);




:::::::::::::::::::::Time()
Obtient ou définit la position locale de la tête de lecture (essentiellement l heure actuelle), 
décrite en secondes (ou images pour les animations basées sur des cadres) qui ne sera 
jamais inférieure à 0 ou supérieure à la durée de l animation.

var currentTime = myAnimation.time(); //gets current time
myAnimation.time(2); //sets time, jumping to new value just like seek().






:::::::::::::::reverse()
Inverse la lecture de sorte que tous les aspects de l animation soient orientés 
vers l arrière, y compris, par exemple, la facilité d une interpolation.

// inverse la lecture depuis l'endroit où se trouve la tête de lecture: 
 myAnimation.reverse();
 
 /// inverse la lecture d'exactement 2 secondes dans l'animation: myAnimation
 myAnimation.reverse(2);
 
 // inverse la lecture d'exactement 2 secondes dans l'animation mais ne supprime pas les événements pendant le déplacement initial
myAnimation.reverse(2, false);
 
// inverse la lecture depuis la fin de l'animation: 
myAnimation.reverse(0);
  
// inverse la lecture à partir d'exactement 1 seconde avant la fin de l'animation:
myAnimation.reverse(-1);
 
// inverse l'orientation (si elle est en avant, il ira vers l' arrière, si elle est en arrière, il ira de l' avant):
if (myAnimation.reversed()) {
    myAnimation.play();
} else {
    myAnimation.reverse();
}
// retourne l'orientation en utilisant la méthode reverse () (version plus courte du code ci-dessus):
myAnimation.reversed( !myAnimation.reversed() );


// Animer des pseudos éléments via CSSRulePlugin

CSS >>
.myClass {
    color:#FF0000;
}
.myClass:before {
    content:"This content is before.";
    color:#00FF00;
}

JS >>
var rule = CSSRulePlugin.getRule(".myClass:before"); //get the rule
TweenLite.to(rule, 3, {cssRule:{color:"#0000FF"}});
ou 
TweenLite.to( CSSRulePlugin.getRule(":before"), 3, {cssRule:{color:"#0000CC"}});











<script>
var BlobWorld = new(function() {
    function b(f, h) {
        var d = new Blob;
        d.position.x = f.x;
        d.position.y = f.y;
        d.velocity.x = h.x;
        d.velocity.y = h.y;
        d.generateNodes();
        j.push(d)
    }

    function e(f) {
        u = f.clientX - (window.innerWidth - g.width) * 0.5;
        v = f.clientY - (window.innerHeight - g.height) * 0.5
    }

    function i(f) {
        f.preventDefault();
        y = true;
        E()
    }

    function k() {
        y = false;
        if (q) {
            q.dragNodeIndex = -1;
            q = null
        }
    }

    function s(f) {
        if (f.touches.length == 1) {
            f.preventDefault();
            y = true;
            u = f.touches[0].pageX - (window.innerWidth - g.width) * 0.5;
            v = f.touches[0].pageY - (window.innerHeight -
                g.height) * 0.5;
            (new Date).getTime() - F < 300 ? G() : E();
            F = (new Date).getTime()
        }
    }

    function z(f) {
        if (f.touches.length == 1) {
            f.preventDefault();
            u = f.touches[0].pageX - (window.innerWidth - g.width) * 0.5;
            v = f.touches[0].pageY - (window.innerHeight - g.height) * 0.5
        }
    }

    function L() {
        y = false;
        if (q) {
            q.dragNodeIndex = -1;
            q = null
        }
    }

    function M() {
        G()
    }

    function E() {
        q = j[D(j, {
            x: u,
            y: v
        })];
        q.dragNodeIndex = D(q.nodes, {
            x: u,
            y: v
        })
    }

    function G() {
        var f = {
                x: u,
                y: v
            },
            h = j[D(j, f)];
        distanceBetween(h.position, f) < h.radius + 30 && h.quality > 8 && j.push(h.split())
    }

    function N(f) {
        switch (f.keyCode) {
            case 40:
                A(-10);
                f.preventDefault();
                break;
            case 38:
                A(10);
                f.preventDefault();
                break;
            case 37:
                B(-1);
                f.preventDefault();
                break;
            case 39:
                B(1);
                f.preventDefault();
                break
        }
    }

    function O() {
        A(20)
    }

    function P() {
        A(-20)
    }

    function Q() {
        B(-1)
    }

    function R() {
        B(1)
    }

    function B(f) {
        w += f;
        w = w < 0 ? C.length - 1 : w;
        w = w > C.length - 1 ? 0 : w;
        document.body.style.backgroundColor = C[w].backgroundColor
    }

    function A(f) {
        for (var h = 0, d = j.length; h < d; h++) {
            blob = j[h];
            var n = blob.radius;
            blob.radius += f;
            blob.radius = Math.max(40, Math.min(blob.radius, 280));
            blob.radius != n && blob.updateNormals()
        }
    }

    function D(f, h) {
        for (var d = 9999, n = 9999, a = -1, o = 0, r = f.length; o < r; o++) {
            n = distanceBetween(f[o].position, {
                x: h.x,
                y: h.y
            });
            if (n < d) {
                d = n;
                a = o
            }
        }
        return a
    }

    function H() {
        g.width = window.innerWidth;
        g.height = window.innerHeight;
        t.width = g.width;
        t.height = g.height;
        g.x = 3;
        g.y = 3;
        g.width -= 6;
        g.height -= 6
    }

    function S() {
        var f = C[w],
            h, d, n, a;
        h = 0;
        for (n = j.length; h < n; h++) {
            a = j[h];
            l.clearRect(a.dirtyRegion.left - 80, a.dirtyRegion.top - 80, a.dirtyRegion.right - a.dirtyRegion.left + 160, a.dirtyRegion.bottom - a.dirtyRegion.top + 160);
            a.dirtyRegion.reset()
        }
        if (x.blobA !=
            -1 && x.blobB != -1) {
            h = x.blobA;
            n = x.blobB;
            a = getTime();
            if (j[h] && j[n])
                if (a - j[h].lastSplitTime > 500 && a - j[n].lastSplitTime > 500) {
                    j[h].merge(j[n]);
                    if (q == j[n] && y) q = j[h];
                    j.splice(n, 1)
                }
            x.blobA = -1;
            x.blobB = -1
        }
        if (q) {
            q.velocity.x += (u - q.position.x) * 0.01;
            q.velocity.y += (v + 100 - q.position.y) * 0.01
        }
        h = 0;
        for (n = j.length; h < n; h++) {
            a = j[h];
            for (d = 0; d < n; d++) {
                var o = j[d];
                if (o != a)
                    if (distanceBetween({
                            x: a.position.x,
                            y: a.position.y
                        }, {
                            x: o.position.x,
                            y: o.position.y
                        }) < a.radius + o.radius) {
                        x.blobA = a.position.x > o.position.x ? h : d;
                        x.blobB = a.position.x >
                            o.position.x ? d : h
                    }
            }
            a.velocity.x += (window.screenX - I) * (0.04 + Math.random() * 0.1);
            a.velocity.y += (window.screenY - J) * (0.04 + Math.random() * 0.1);
            d = {
                x: 1.035,
                y: 1.035
            };
            if (a.position.x > g.x + g.width) {
                a.velocity.x -= (a.position.x - g.width) * 0.04;
                d.y += 0.035
            } else if (a.position.x < g.x) {
                a.velocity.x += Math.abs(g.x - a.position.x) * 0.04;
                d.y += 0.035
            }
            if (a.position.y + a.radius * 0.25 > g.y + g.height) {
                a.velocity.y -= (a.position.y + a.radius * 0.25 - g.height) * 0.04;
                d.x += 0.015
            } else if (a.position.y < g.y) {
                a.velocity.y += Math.abs(g.y - a.position.y) * 0.04;
                d.x += 0.015
            }
            a.velocity.x += K.x;
            a.velocity.y += K.y;
            a.velocity.x /= d.x;
            a.velocity.y /= d.y;
            a.position.x += a.velocity.x;
            a.position.y += a.velocity.y;
            var r, c, m, p;
            d = 0;
            for (o = a.nodes.length; d < o; d++) {
                c = a.nodes[d];
                c.ghost.x = c.position.x;
                c.ghost.y = c.position.y
            }
            if (a.nodes[a.dragNodeIndex]) {
                a.rotation.target = Math.atan2(v - a.position.y - a.radius * 4, u - a.position.x);
                a.rotation.current += (a.rotation.target - a.rotation.current) * 0.2;
                a.updateNormals()
            }
            d = 0;
            for (o = a.nodes.length; d < o; d++) {
                c = a.nodes[d];
                c.normal.x += (c.normalTarget.x - c.normal.x) *
                    0.05;
                c.normal.y += (c.normalTarget.y - c.normal.y) * 0.05;
                p = {
                    x: a.position.x,
                    y: a.position.y
                };
                for (r = 0; r < c.joints.length; r++) {
                    m = c.joints[r];
                    var T = m.node.ghost.y - c.ghost.y - (m.node.normal.y - c.normal.y);
                    m.strain.x += (m.node.ghost.x - c.ghost.x - (m.node.normal.x - c.normal.x) - m.strain.x) * 0.3;
                    m.strain.y += (T - m.strain.y) * 0.3;
                    p.x += m.strain.x * m.strength;
                    p.y += m.strain.y * m.strength
                }
                p.x += c.normal.x;
                p.y += c.normal.y;
                r = getArrayIndexByOffset(a.nodes, a.dragNodeIndex, -1);
                m = getArrayIndexByOffset(a.nodes, a.dragNodeIndex, 1);
                if (a.dragNodeIndex !=
                    -1 && (d == a.dragNodeIndex || a.nodes.length > 8 && (d == r || d == m))) {
                    r = d == a.dragNodeIndex ? 0.7 : 0.5;
                    p.x += (u - p.x) * r;
                    p.y += (v - p.y) * r
                }
                c.position.x += (p.x - c.position.x) * 0.1;
                c.position.y += (p.y - c.position.y) * 0.1;
                c.position.x = Math.max(Math.min(c.position.x, g.x + g.width), g.x);
                c.position.y = Math.max(Math.min(c.position.y, g.y + g.height), g.y);
                a.dirtyRegion.inflate(c.position.x, c.position.y)
            }
            if (!f.debug) {
                l.beginPath();
                l.fillStyle = f.fillStyle;
                l.strokeStyle = f.strokeStyle;
                l.lineWidth = f.lineWidth
            }
            c = getArrayElementByOffset(a.nodes,
                0, -1);
            p = getArrayElementByOffset(a.nodes, 0, 0);
            l.moveTo(c.position.x + (p.position.x - c.position.x) / 2, c.position.y + (p.position.y - c.position.y) / 2);
            d = 0;
            for (o = a.nodes.length; d < o; d++) {
                c = getArrayElementByOffset(a.nodes, d, 0);
                p = getArrayElementByOffset(a.nodes, d, 1);
                if (f.debug) {
                    l.beginPath();
                    l.lineWidth = 1;
                    l.strokeStyle = "#ababab";
                    for (r = 0; r < c.joints.length; r++) {
                        m = c.joints[r];
                        l.moveTo(c.position.x, c.position.y);
                        l.lineTo(m.node.position.x, m.node.position.y)
                    }
                    l.stroke();
                    l.beginPath();
                    l.fillStyle = d == 0 ? "#00ff00" : d == a.dragNodeIndex ?
                        "ff0000" : "#dddddd";
                    l.arc(c.position.x, c.position.y, 5, 0, Math.PI * 2, true);
                    l.fill()
                } else l.quadraticCurveTo(c.position.x, c.position.y, c.position.x + (p.position.x - c.position.x) / 2, c.position.y + (p.position.y - c.position.y) / 2)
            }
            l.stroke();
            l.fill()
        }
        I = window.screenX;
        J = window.screenY
    }
    var g = {
            x: 0,
            y: 0,
            width: window.innerWidth,
            height: window.innerHeight
        },
        t, l, j = [],
        q, I = window.screenX,
        J = window.screenY,
        u = g.width * 0.5,
        v = g.height * 0.5,
        y = false,
        F = 0,
        K = {
            x: 0,
            y: 1.2
        },
        x = {
            blobA: -1,
            blobB: -1
        },
        w = 0,
        C = [{
            fillStyle: "rgba(0,200,250,1.0)",
            strokeStyle: "#ffffff",
            lineWidth: 5,
            backgroundColor: "#222222",
            debug: false
        }, {
            fillStyle: "",
            strokeStyle: "",
            lineWidth: 0,
            backgroundColor: "#222222",
            debug: true
        }, {
            fillStyle: "rgba(0,0,0,0.1)",
            strokeStyle: "rgba(255,255,255,1.0)",
            lineWidth: 6,
            backgroundColor: "#222222",
            debug: false
        }, {
            fillStyle: "rgba(255,60,60,1.0)",
            strokeStyle: "rgba(0,0,0,1.0)",
            lineWidth: 2,
            backgroundColor: "#222222",
            debug: false
        }, {
            fillStyle: "rgba(255,255,0,1.0)",
            strokeStyle: "rgba(0,0,0,1.0)",
            lineWidth: 4,
            backgroundColor: "#222222",
            debug: false
        }, {
            fillStyle: "rgba(255,255,255,1.0)",
            strokeStyle: "rgba(0,0,0,1.0)",
            lineWidth: 4,
            backgroundColor: "#000000",
            debug: false
        }, {
            fillStyle: "rgba(0,0,0,1.0)",
            strokeStyle: "rgba(0,0,0,1.0)",
            lineWidth: 4,
            backgroundColor: "#ffffff",
            debug: false
        }];
    this.init = function() {
        if ((t = document.getElementById("world")) && t.getContext) {
            l = t.getContext("2d");
            document.addEventListener("mousemove", e, false);
            t.addEventListener("mousedown", i, false);
            t.addEventListener("dblclick", M, false);
            document.addEventListener("mouseup", k, false);
            document.addEventListener("keydown", N, false);
            t.addEventListener("touchstart", s, false);
            t.addEventListener("touchmove", z, false);
            t.addEventListener("touchend", L, false);
            window.addEventListener("resize", H, false);
            document.getElementById("keyboardUp").addEventListener("click", O, false);
            document.getElementById("keyboardDown").addEventListener("click", P, false);
            document.getElementById("keyboardLeft").addEventListener("click", Q, false);
            document.getElementById("keyboardRight").addEventListener("click", R, false);
            b({
                x: g.width * 0.15,
                y: g.height * Math.random() * 0.2
            }, {
                x: g.width * 0.011,
                y: 0
            });
            b({
                x: g.width * 0.85,
                y: g.height * Math.random() * 0.2
            }, {
                x: -g.width * 0.011,
                y: 0
            });
            H();
            setInterval(S, 1E3 / 60)
        }
    }
});

function Region() {
    this.top = this.left = 999999;
    this.bottom = this.right = 0
}
Region.prototype.reset = function() {
    this.top = this.left = 999999;
    this.bottom = this.right = 0
};
Region.prototype.inflate = function(b, e) {
    this.left = Math.min(this.left, b);
    this.top = Math.min(this.top, e);
    this.right = Math.max(this.right, b);
    this.bottom = Math.max(this.bottom, e)
};

function Blob() {
    this.position = {
        x: 0,
        y: 0
    };
    this.velocity = {
        x: 0,
        y: 0
    };
    this.radius = 85;
    this.nodes = [];
    this.rotation = {
        current: 0,
        target: 0
    };
    this.dragNodeIndex = -1;
    this.lastSplitTime = 0;
    this.quality = 16;
    this.dirtyRegion = new Region
}
Blob.prototype.generateNodes = function() {
    this.nodes = [];
    var b, e;
    for (b = 0; b < this.quality; b++) {
        e = {
            normal: {
                x: 0,
                y: 0
            },
            normalTarget: {
                x: 0,
                y: 0
            },
            position: {
                x: this.position.x,
                y: this.position.y
            },
            ghost: {
                x: this.position.x,
                y: this.position.y
            },
            angle: 0
        };
        this.nodes.push(e)
    }
    this.updateJoints();
    this.updateNormals()
};
Blob.prototype.updateJoints = function() {
    for (var b = 0; b < this.quality; b++) {
        var e = this.nodes[b];
        e.joints = [];
        e.joints.push(new Joint(getArrayElementByOffset(this.nodes, b, -1), 0.4));
        e.joints.push(new Joint(getArrayElementByOffset(this.nodes, b, 1), 0.4));
        if (this.quality > 4) {
            e.joints.push(new Joint(getArrayElementByOffset(this.nodes, b, -2), 0.4));
            e.joints.push(new Joint(getArrayElementByOffset(this.nodes, b, 2), 0.4))
        }
        if (this.quality > 8) {
            e.joints.push(new Joint(getArrayElementByOffset(this.nodes, b, -3), 0.4));
            e.joints.push(new Joint(getArrayElementByOffset(this.nodes,
                b, 3), 0.4))
        }
    }
};
Blob.prototype.updateNormals = function() {
    var b, e, i;
    for (b = 0; b < this.quality; b++) {
        i = this.nodes[b];
        if (this.dragNodeIndex != -1) {
            e = b - Math.round(this.dragNodeIndex);
            e = e < 0 ? this.quality + e : e
        } else e = b;
        i.angle = e / this.quality * Math.PI * 2 + this.rotation.target;
        i.normalTarget.x = Math.cos(i.angle) * this.radius;
        i.normalTarget.y = Math.sin(i.angle) * this.radius;
        if (i.normal.x == 0 && i.normal.y == 0) {
            i.normal.x = i.normalTarget.x;
            i.normal.y = i.normalTarget.y
        }
    }
};
Blob.prototype.split = function() {
    var b = this.radius / 10,
        e = Math.round(this.nodes.length * 0.5),
        i = this.radius * 0.5,
        k = new Blob;
    k.position.x = this.position.x;
    k.position.y = this.position.y;
    k.nodes = [];
    for (var s = 0; s++ < e;) k.nodes.push(this.nodes.shift());
    var z = e = 0;
    for (s = 0; s < this.nodes.length; s++) e += this.nodes[s].position.x;
    for (s = 0; s < k.nodes.length; s++) z += k.nodes[s].position.x;
    k.velocity.x = z > e ? b : -b;
    k.velocity.y = this.velocity.y;
    k.radius = i;
    k.quality = k.nodes.length;
    this.velocity.x = e > z ? b : -b;
    this.radius = i;
    this.quality =
        this.nodes.length;
    this.dragNodeIndex = -1;
    this.updateJoints();
    this.updateNormals();
    k.dragNodeIndex = -1;
    k.updateJoints();
    k.updateNormals();
    k.lastSplitTime = getTime();
    this.lastSplitTime = getTime();
    return k
};
Blob.prototype.merge = function(b) {
    this.velocity.x *= 0.5;
    this.velocity.y *= 0.5;
    this.velocity.x += b.velocity.x * 0.5;
    for (this.velocity.y += b.velocity.y * 0.5; b.nodes.length;) this.nodes.push(b.nodes.shift());
    this.quality = this.nodes.length;
    this.radius += b.radius;
    this.dragNodeIndex = b.dragNodeIndex != -1 ? b.dragNodeIndex : this.dragNodeIndex;
    this.updateNormals();
    this.updateJoints()
};

function Joint(b, e) {
    this.node = b;
    this.strength = e;
    this.strain = {
        x: 0,
        y: 0
    }
}

function getArrayIndexByOffset(b, e, i) {
    if (b[e + i]) return e + i;
    if (e + i > b.length - 1) return e - b.length + i;
    if (e + i < 0) return b.length + (e + i)
}

function getArrayElementByOffset(b, e, i) {
    return b[getArrayIndexByOffset(b, e, i)]
}

function getTime() {
    return (new Date).getTime()
}

function distanceBetween(b, e) {
    var i = e.x - b.x,
        k = e.y - b.y;
    return Math.sqrt(i * i + k * k)
}
BlobWorld.init();</script>












Sublime Text 3  change $ color var jQuery


Theme.tmTheme >>

    <dict>
        <key>name</key>
        <string>jQuery $</string>
        <key>scope</key>
        <string>variable.other.dollar.only.js</string>
        <key>settings</key>
        <dict>
            <key>foreground</key>
            <string>#ff0000</string>
        </dict>
    </dict>
    <dict>
        <key>name</key>
        <string>jQuery $</string>
        <key>scope</key>
        <string>punctuation.dollar.js</string>
        <key>settings</key>
        <dict>
            <key>foreground</key>
            <string>#ff0000</string>
        </dict>
    </dict>
